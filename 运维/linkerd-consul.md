# linkerd-consul

## 相关文档

官方安装文档

> https://www.bookstack.cn/read/linkerd/doc\-getting\-started\-locally.md

官方配置文档

> https://api.linkerd.io/head/linkerd/index.html\#introduction

finagle文档

> https://twitter.github.io/finagle/guide/Clients.html\#load\-balancing

国内版学习文档

> https://gitchat.csdn.net/columnTopic/5a3757cfd7fd136499739b8e

先安装 JDK

## 概览

linkerd简单理解：就是一个代理器，有点类似网关（但不是真的网关）

![WX20211202-125716@2x.png](image/WX20211202-125716@2x.png)

LINKERD的作用：

1. 基于感知时延的负载均衡
2. 运行时动态路由
3. 熔断机制、流量控制
4. 服务发现管理
5. 多协议兼容

注意：说它不是真的传统型网关，因为它是作用在client以sidecar模式运行，也就是在client端开一个linkerd进程守护

缺点：因其运行在client端，更适合后端内部使用

> l5d：linkerd 缩写,其中5:inker，代理5个字母

内部模块流转

|名称      |描述                                                          |
|----------|--------------------------------------------------------------|
|Identifier|根据配置规则，识别出请求的service\-name                       |
|dtab      |delegation table/委托表的简称                                 |
|bindding  |根据service\-name去dtab找寻条目，进行 绑定，找到服务发现解释器|
|Resolution|根据service\-name 解析出一个 IP:PORT                          |

```
PHN2ZyBpZD0iZDVhaXJvZnRlNWkiIHdpZHRoPSIxMDAlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJtYXgtd2lkdGg6IDg2NC42MjVweDsiIHZpZXdCb3g9IjAgMCA4NjQuNjI1IDUyLjI4MTI1Ij48c3R5bGU+CgoKI2Q1YWlyb2Z0ZTVpIC5sYWJlbCB7CiAgZm9udC1mYW1pbHk6ICd0cmVidWNoZXQgbXMnLCB2ZXJkYW5hLCBhcmlhbDsKICBjb2xvcjogIzMzMzsgfQoKI2Q1YWlyb2Z0ZTVpIC5ub2RlIHJlY3QsCiNkNWFpcm9mdGU1aSAubm9kZSBjaXJjbGUsCiNkNWFpcm9mdGU1aSAubm9kZSBlbGxpcHNlLAojZDVhaXJvZnRlNWkgLm5vZGUgcG9seWdvbiB7CiAgZmlsbDogI0VDRUNGRjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxcHg7IH0KCiNkNWFpcm9mdGU1aSAubm9kZS5jbGlja2FibGUgewogIGN1cnNvcjogcG9pbnRlcjsgfQoKI2Q1YWlyb2Z0ZTVpIC5hcnJvd2hlYWRQYXRoIHsKICBmaWxsOiAjMzMzMzMzOyB9CgojZDVhaXJvZnRlNWkgLmVkZ2VQYXRoIC5wYXRoIHsKICBzdHJva2U6ICMzMzMzMzM7CiAgc3Ryb2tlLXdpZHRoOiAxLjVweDsgfQoKI2Q1YWlyb2Z0ZTVpIC5lZGdlTGFiZWwgewogIGJhY2tncm91bmQtY29sb3I6ICNlOGU4ZTg7IH0KCiNkNWFpcm9mdGU1aSAuY2x1c3RlciByZWN0IHsKICBmaWxsOiAjZmZmZmRlICFpbXBvcnRhbnQ7CiAgc3Ryb2tlOiAjYWFhYTMzICFpbXBvcnRhbnQ7CiAgc3Ryb2tlLXdpZHRoOiAxcHggIWltcG9ydGFudDsgfQoKI2Q1YWlyb2Z0ZTVpIC5jbHVzdGVyIHRleHQgewogIGZpbGw6ICMzMzM7IH0KCiNkNWFpcm9mdGU1aSBkaXYubWVybWFpZFRvb2x0aXAgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgbWF4LXdpZHRoOiAyMDBweDsKICBwYWRkaW5nOiAycHg7CiAgZm9udC1mYW1pbHk6ICd0cmVidWNoZXQgbXMnLCB2ZXJkYW5hLCBhcmlhbDsKICBmb250LXNpemU6IDEycHg7CiAgYmFja2dyb3VuZDogI2ZmZmZkZTsKICBib3JkZXI6IDFweCBzb2xpZCAjYWFhYTMzOwogIGJvcmRlci1yYWRpdXM6IDJweDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB6LWluZGV4OiAxMDA7IH0KCiNkNWFpcm9mdGU1aSAuYWN0b3IgewogIHN0cm9rZTogI0NDQ0NGRjsKICBmaWxsOiAjRUNFQ0ZGOyB9CgojZDVhaXJvZnRlNWkgdGV4dC5hY3RvciB7CiAgZmlsbDogYmxhY2s7CiAgc3Ryb2tlOiBub25lOyB9CgojZDVhaXJvZnRlNWkgLmFjdG9yLWxpbmUgewogIHN0cm9rZTogZ3JleTsgfQoKI2Q1YWlyb2Z0ZTVpIC5tZXNzYWdlTGluZTAgewogIHN0cm9rZS13aWR0aDogMS41OwogIHN0cm9rZS1kYXNoYXJyYXk6ICcyIDInOwogIHN0cm9rZTogIzMzMzsgfQoKI2Q1YWlyb2Z0ZTVpIC5tZXNzYWdlTGluZTEgewogIHN0cm9rZS13aWR0aDogMS41OwogIHN0cm9rZS1kYXNoYXJyYXk6ICcyIDInOwogIHN0cm9rZTogIzMzMzsgfQoKI2Q1YWlyb2Z0ZTVpICNhcnJvd2hlYWQgewogIGZpbGw6ICMzMzM7IH0KCiNkNWFpcm9mdGU1aSAjY3Jvc3NoZWFkIHBhdGggewogIGZpbGw6ICMzMzMgIWltcG9ydGFudDsKICBzdHJva2U6ICMzMzMgIWltcG9ydGFudDsgfQoKI2Q1YWlyb2Z0ZTVpIC5tZXNzYWdlVGV4dCB7CiAgZmlsbDogIzMzMzsKICBzdHJva2U6IG5vbmU7IH0KCiNkNWFpcm9mdGU1aSAubGFiZWxCb3ggewogIHN0cm9rZTogI0NDQ0NGRjsKICBmaWxsOiAjRUNFQ0ZGOyB9CgojZDVhaXJvZnRlNWkgLmxhYmVsVGV4dCB7CiAgZmlsbDogYmxhY2s7CiAgc3Ryb2tlOiBub25lOyB9CgojZDVhaXJvZnRlNWkgLmxvb3BUZXh0IHsKICBmaWxsOiBibGFjazsKICBzdHJva2U6IG5vbmU7IH0KCiNkNWFpcm9mdGU1aSAubG9vcExpbmUgewogIHN0cm9rZS13aWR0aDogMjsKICBzdHJva2UtZGFzaGFycmF5OiAnMiAyJzsKICBzdHJva2U6ICNDQ0NDRkY7IH0KCiNkNWFpcm9mdGU1aSAubm90ZSB7CiAgc3Ryb2tlOiAjYWFhYTMzOwogIGZpbGw6ICNmZmY1YWQ7IH0KCiNkNWFpcm9mdGU1aSAubm90ZVRleHQgewogIGZpbGw6IGJsYWNrOwogIHN0cm9rZTogbm9uZTsKICBmb250LWZhbWlseTogJ3RyZWJ1Y2hldCBtcycsIHZlcmRhbmEsIGFyaWFsOwogIGZvbnQtc2l6ZTogMTRweDsgfQoKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmF0aW9uMCB7CiAgZmlsbDogI2Y0ZjRmNDsKICBzdHJva2U6ICM2NjY7IH0KCiNkNWFpcm9mdGU1aSAuYWN0aXZhdGlvbjEgewogIGZpbGw6ICNmNGY0ZjQ7CiAgc3Ryb2tlOiAjNjY2OyB9CgojZDVhaXJvZnRlNWkgLmFjdGl2YXRpb24yIHsKICBmaWxsOiAjZjRmNGY0OwogIHN0cm9rZTogIzY2NjsgfQoKCiNkNWFpcm9mdGU1aSAuc2VjdGlvbiB7CiAgc3Ryb2tlOiBub25lOwogIG9wYWNpdHk6IDAuMjsgfQoKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uMCB7CiAgZmlsbDogcmdiYSgxMDIsIDEwMiwgMjU1LCAwLjQ5KTsgfQoKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uMiB7CiAgZmlsbDogI2ZmZjQwMDsgfQoKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uMSwKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uMyB7CiAgZmlsbDogd2hpdGU7CiAgb3BhY2l0eTogMC4yOyB9CgojZDVhaXJvZnRlNWkgLnNlY3Rpb25UaXRsZTAgewogIGZpbGw6ICMzMzM7IH0KCiNkNWFpcm9mdGU1aSAuc2VjdGlvblRpdGxlMSB7CiAgZmlsbDogIzMzMzsgfQoKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uVGl0bGUyIHsKICBmaWxsOiAjMzMzOyB9CgojZDVhaXJvZnRlNWkgLnNlY3Rpb25UaXRsZTMgewogIGZpbGw6ICMzMzM7IH0KCiNkNWFpcm9mdGU1aSAuc2VjdGlvblRpdGxlIHsKICB0ZXh0LWFuY2hvcjogc3RhcnQ7CiAgZm9udC1zaXplOiAxMXB4OwogIHRleHQtaGVpZ2h0OiAxNHB4OyB9CgoKI2Q1YWlyb2Z0ZTVpIC5ncmlkIC50aWNrIHsKICBzdHJva2U6IGxpZ2h0Z3JleTsKICBvcGFjaXR5OiAwLjM7CiAgc2hhcGUtcmVuZGVyaW5nOiBjcmlzcEVkZ2VzOyB9CgojZDVhaXJvZnRlNWkgLmdyaWQgcGF0aCB7CiAgc3Ryb2tlLXdpZHRoOiAwOyB9CgoKI2Q1YWlyb2Z0ZTVpIC50b2RheSB7CiAgZmlsbDogbm9uZTsKICBzdHJva2U6IHJlZDsKICBzdHJva2Utd2lkdGg6IDJweDsgfQoKCgojZDVhaXJvZnRlNWkgLnRhc2sgewogIHN0cm9rZS13aWR0aDogMjsgfQoKI2Q1YWlyb2Z0ZTVpIC50YXNrVGV4dCB7CiAgdGV4dC1hbmNob3I6IG1pZGRsZTsKICBmb250LXNpemU6IDExcHg7IH0KCiNkNWFpcm9mdGU1aSAudGFza1RleHRPdXRzaWRlUmlnaHQgewogIGZpbGw6IGJsYWNrOwogIHRleHQtYW5jaG9yOiBzdGFydDsKICBmb250LXNpemU6IDExcHg7IH0KCiNkNWFpcm9mdGU1aSAudGFza1RleHRPdXRzaWRlTGVmdCB7CiAgZmlsbDogYmxhY2s7CiAgdGV4dC1hbmNob3I6IGVuZDsKICBmb250LXNpemU6IDExcHg7IH0KCgojZDVhaXJvZnRlNWkgLnRhc2tUZXh0MCwKI2Q1YWlyb2Z0ZTVpIC50YXNrVGV4dDEsCiNkNWFpcm9mdGU1aSAudGFza1RleHQyLAojZDVhaXJvZnRlNWkgLnRhc2tUZXh0MyB7CiAgZmlsbDogd2hpdGU7IH0KCiNkNWFpcm9mdGU1aSAudGFzazAsCiNkNWFpcm9mdGU1aSAudGFzazEsCiNkNWFpcm9mdGU1aSAudGFzazIsCiNkNWFpcm9mdGU1aSAudGFzazMgewogIGZpbGw6ICM4YTkwZGQ7CiAgc3Ryb2tlOiAjNTM0ZmJjOyB9CgojZDVhaXJvZnRlNWkgLnRhc2tUZXh0T3V0c2lkZTAsCiNkNWFpcm9mdGU1aSAudGFza1RleHRPdXRzaWRlMiB7CiAgZmlsbDogYmxhY2s7IH0KCiNkNWFpcm9mdGU1aSAudGFza1RleHRPdXRzaWRlMSwKI2Q1YWlyb2Z0ZTVpIC50YXNrVGV4dE91dHNpZGUzIHsKICBmaWxsOiBibGFjazsgfQoKCiNkNWFpcm9mdGU1aSAuYWN0aXZlMCwKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmUxLAojZDVhaXJvZnRlNWkgLmFjdGl2ZTIsCiNkNWFpcm9mdGU1aSAuYWN0aXZlMyB7CiAgZmlsbDogI2JmYzdmZjsKICBzdHJva2U6ICM1MzRmYmM7IH0KCiNkNWFpcm9mdGU1aSAuYWN0aXZlVGV4dDAsCiNkNWFpcm9mdGU1aSAuYWN0aXZlVGV4dDEsCiNkNWFpcm9mdGU1aSAuYWN0aXZlVGV4dDIsCiNkNWFpcm9mdGU1aSAuYWN0aXZlVGV4dDMgewogIGZpbGw6IGJsYWNrICFpbXBvcnRhbnQ7IH0KCgojZDVhaXJvZnRlNWkgLmRvbmUwLAojZDVhaXJvZnRlNWkgLmRvbmUxLAojZDVhaXJvZnRlNWkgLmRvbmUyLAojZDVhaXJvZnRlNWkgLmRvbmUzIHsKICBzdHJva2U6IGdyZXk7CiAgZmlsbDogbGlnaHRncmV5OwogIHN0cm9rZS13aWR0aDogMjsgfQoKI2Q1YWlyb2Z0ZTVpIC5kb25lVGV4dDAsCiNkNWFpcm9mdGU1aSAuZG9uZVRleHQxLAojZDVhaXJvZnRlNWkgLmRvbmVUZXh0MiwKI2Q1YWlyb2Z0ZTVpIC5kb25lVGV4dDMgewogIGZpbGw6IGJsYWNrICFpbXBvcnRhbnQ7IH0KCgojZDVhaXJvZnRlNWkgLmNyaXQwLAojZDVhaXJvZnRlNWkgLmNyaXQxLAojZDVhaXJvZnRlNWkgLmNyaXQyLAojZDVhaXJvZnRlNWkgLmNyaXQzIHsKICBzdHJva2U6ICNmZjg4ODg7CiAgZmlsbDogcmVkOwogIHN0cm9rZS13aWR0aDogMjsgfQoKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmVDcml0MCwKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmVDcml0MSwKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmVDcml0MiwKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmVDcml0MyB7CiAgc3Ryb2tlOiAjZmY4ODg4OwogIGZpbGw6ICNiZmM3ZmY7CiAgc3Ryb2tlLXdpZHRoOiAyOyB9CgojZDVhaXJvZnRlNWkgLmRvbmVDcml0MCwKI2Q1YWlyb2Z0ZTVpIC5kb25lQ3JpdDEsCiNkNWFpcm9mdGU1aSAuZG9uZUNyaXQyLAojZDVhaXJvZnRlNWkgLmRvbmVDcml0MyB7CiAgc3Ryb2tlOiAjZmY4ODg4OwogIGZpbGw6IGxpZ2h0Z3JleTsKICBzdHJva2Utd2lkdGg6IDI7CiAgY3Vyc29yOiBwb2ludGVyOwogIHNoYXBlLXJlbmRlcmluZzogY3Jpc3BFZGdlczsgfQoKI2Q1YWlyb2Z0ZTVpIC5kb25lQ3JpdFRleHQwLAojZDVhaXJvZnRlNWkgLmRvbmVDcml0VGV4dDEsCiNkNWFpcm9mdGU1aSAuZG9uZUNyaXRUZXh0MiwKI2Q1YWlyb2Z0ZTVpIC5kb25lQ3JpdFRleHQzIHsKICBmaWxsOiBibGFjayAhaW1wb3J0YW50OyB9CgojZDVhaXJvZnRlNWkgLmFjdGl2ZUNyaXRUZXh0MCwKI2Q1YWlyb2Z0ZTVpIC5hY3RpdmVDcml0VGV4dDEsCiNkNWFpcm9mdGU1aSAuYWN0aXZlQ3JpdFRleHQyLAojZDVhaXJvZnRlNWkgLmFjdGl2ZUNyaXRUZXh0MyB7CiAgZmlsbDogYmxhY2sgIWltcG9ydGFudDsgfQoKI2Q1YWlyb2Z0ZTVpIC50aXRsZVRleHQgewogIHRleHQtYW5jaG9yOiBtaWRkbGU7CiAgZm9udC1zaXplOiAxOHB4OwogIGZpbGw6IGJsYWNrOyB9CgojZDVhaXJvZnRlNWkgZy5jbGFzc0dyb3VwIHRleHQgewogIGZpbGw6ICM5MzcwREI7CiAgc3Ryb2tlOiBub25lOwogIGZvbnQtZmFtaWx5OiAndHJlYnVjaGV0IG1zJywgdmVyZGFuYSwgYXJpYWw7CiAgZm9udC1zaXplOiAxMHB4OyB9CgojZDVhaXJvZnRlNWkgZy5jbGFzc0dyb3VwIHJlY3QgewogIGZpbGw6ICNFQ0VDRkY7CiAgc3Ryb2tlOiAjOTM3MERCOyB9CgojZDVhaXJvZnRlNWkgZy5jbGFzc0dyb3VwIGxpbmUgewogIHN0cm9rZTogIzkzNzBEQjsKICBzdHJva2Utd2lkdGg6IDE7IH0KCiNkNWFpcm9mdGU1aSAuY2xhc3NMYWJlbCAuYm94IHsKICBzdHJva2U6IG5vbmU7CiAgc3Ryb2tlLXdpZHRoOiAwOwogIGZpbGw6ICNFQ0VDRkY7CiAgb3BhY2l0eTogMC41OyB9CgojZDVhaXJvZnRlNWkgLmNsYXNzTGFiZWwgLmxhYmVsIHsKICBmaWxsOiAjOTM3MERCOwogIGZvbnQtc2l6ZTogMTBweDsgfQoKI2Q1YWlyb2Z0ZTVpIC5yZWxhdGlvbiB7CiAgc3Ryb2tlOiAjOTM3MERCOwogIHN0cm9rZS13aWR0aDogMTsKICBmaWxsOiBub25lOyB9CgojZDVhaXJvZnRlNWkgI2NvbXBvc2l0aW9uU3RhcnQgewogIGZpbGw6ICM5MzcwREI7CiAgc3Ryb2tlOiAjOTM3MERCOwogIHN0cm9rZS13aWR0aDogMTsgfQoKI2Q1YWlyb2Z0ZTVpICNjb21wb3NpdGlvbkVuZCB7CiAgZmlsbDogIzkzNzBEQjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxOyB9CgojZDVhaXJvZnRlNWkgI2FnZ3JlZ2F0aW9uU3RhcnQgewogIGZpbGw6ICNFQ0VDRkY7CiAgc3Ryb2tlOiAjOTM3MERCOwogIHN0cm9rZS13aWR0aDogMTsgfQoKI2Q1YWlyb2Z0ZTVpICNhZ2dyZWdhdGlvbkVuZCB7CiAgZmlsbDogI0VDRUNGRjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxOyB9CgojZDVhaXJvZnRlNWkgI2RlcGVuZGVuY3lTdGFydCB7CiAgZmlsbDogIzkzNzBEQjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxOyB9CgojZDVhaXJvZnRlNWkgI2RlcGVuZGVuY3lFbmQgewogIGZpbGw6ICM5MzcwREI7CiAgc3Ryb2tlOiAjOTM3MERCOwogIHN0cm9rZS13aWR0aDogMTsgfQoKI2Q1YWlyb2Z0ZTVpICNleHRlbnNpb25TdGFydCB7CiAgZmlsbDogIzkzNzBEQjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxOyB9CgojZDVhaXJvZnRlNWkgI2V4dGVuc2lvbkVuZCB7CiAgZmlsbDogIzkzNzBEQjsKICBzdHJva2U6ICM5MzcwREI7CiAgc3Ryb2tlLXdpZHRoOiAxOyB9CgojZDVhaXJvZnRlNWkgLmNvbW1pdC1pZCwKI2Q1YWlyb2Z0ZTVpIC5jb21taXQtbXNnLAojZDVhaXJvZnRlNWkgLmJyYW5jaC1sYWJlbCB7CiAgZmlsbDogbGlnaHRncmV5OwogIGNvbG9yOiBsaWdodGdyZXk7IH0KCgoKI2Q1YWlyb2Z0ZTVpIC5sYWJlbHsKICBjb2xvcjojMThCMTRFOwp9CiNkNWFpcm9mdGU1aSAudGUtbWQtY29udGFpbmVyLS1kYXJrIC5ub2RlIHJlY3QgewogIGZpbGw6IHJlZDsKfQoKI2Q1YWlyb2Z0ZTVpIC5ub2RlIHJlY3QsCiNkNWFpcm9mdGU1aSAubm9kZSBjaXJjbGUsCiNkNWFpcm9mdGU1aSAubm9kZSBlbGxpcHNlLAojZDVhaXJvZnRlNWkgLm5vZGUgcG9seWdvbiB7CiAgZmlsbDogI0Y5RkZGQjs7CiAgc3Ryb2tlOiAjMkRCRDYwOwogIHN0cm9rZS13aWR0aDogMS41cHg7Cn0KI2Q1YWlyb2Z0ZTVpIC5hcnJvd2hlYWRQYXRoewogIGZpbGw6ICMyREJENjA7Cn0KI2Q1YWlyb2Z0ZTVpIC5lZGdlUGF0aCAucGF0aCB7CiAgc3Ryb2tlOiAjMkRCRDYwOwogIHN0cm9rZS13aWR0aDogMXB4Owp9CiNkNWFpcm9mdGU1aSAuZWRnZUxhYmVsIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOwp9CiNkNWFpcm9mdGU1aSAuY2x1c3RlciByZWN0IHsKICBmaWxsOiAjRjlGRkZCICFpbXBvcnRhbnQ7CiAgc3Ryb2tlOiAjMkRCRDYwICFpbXBvcnRhbnQ7CiAgc3Ryb2tlLXdpZHRoOiAxcHggIWltcG9ydGFudDsKfQoKI2Q1YWlyb2Z0ZTVpIC5jbHVzdGVyIHRleHQgewogIGZpbGw6ICNGOUZGRkI7Cn0KCiNkNWFpcm9mdGU1aSBkaXYubWVybWFpZFRvb2x0aXAgewogIGJhY2tncm91bmQ6ICNGOUZGRkI7CiAgYm9yZGVyOiAxcHggc29saWQgIzJEQkQ2MDsKfQoKCiNkNWFpcm9mdGU1aSAuYWN0b3IgewogIHN0cm9rZTogIzJEQkQ2MDsKICBmaWxsOiAjRjlGRkZCOwp9CgojZDVhaXJvZnRlNWkgdGV4dC5hY3RvciB7CiAgZmlsbDogIzJEQkQ2MDsKICBzdHJva2U6IG5vbmU7Cn0KCiNkNWFpcm9mdGU1aSAuYWN0b3ItbGluZSB7CiAgc3Ryb2tlOiAjMkRCRDYwOwp9CgojZDVhaXJvZnRlNWkgLm1lc3NhZ2VMaW5lMCB7CiAgc3Ryb2tlLXdpZHRoOiAxLjU7CiAgc3Ryb2tlLWRhc2hhcnJheTogJzIgMic7CiAgbWFya2VyLWVuZDogJ3VybCgjYXJyb3doZWFkKSc7CiAgc3Ryb2tlOiAjMkRCRDYwOwp9CgojZDVhaXJvZnRlNWkgLm1lc3NhZ2VMaW5lMSB7CiAgc3Ryb2tlLXdpZHRoOiAxLjU7CiAgc3Ryb2tlLWRhc2hhcnJheTogJzIgMic7CiAgc3Ryb2tlOiAjMkRCRDYwOwp9CgojZDVhaXJvZnRlNWkgI2Fycm93aGVhZCB7CiAgZmlsbDogIzJEQkQ2MDsKfQoKI2Q1YWlyb2Z0ZTVpICNjcm9zc2hlYWQgcGF0aCB7CiAgZmlsbDogIzJEQkQ2MCAhaW1wb3J0YW50OwogIHN0cm9rZTogIzJEQkQ2MCAhaW1wb3J0YW50Owp9CgojZDVhaXJvZnRlNWkgLm1lc3NhZ2VUZXh0IHsKICBmaWxsOiAjMkRCRDYwOwogIHN0cm9rZTogbm9uZTsKfQoKI2Q1YWlyb2Z0ZTVpIC5sYWJlbEJveCB7CiAgc3Ryb2tlOiAjMkRCRDYwOwogIGZpbGw6ICNGOUZGRkI7Cn0KCiNkNWFpcm9mdGU1aSAubGFiZWxUZXh0IHsKICBmaWxsOiAjMkRCRDYwOwogIHN0cm9rZTogIzJEQkQ2MDsKfQoKI2Q1YWlyb2Z0ZTVpIC5sb29wVGV4dCB7CiAgZmlsbDogIzJEQkQ2MDsKICBzdHJva2U6ICMyREJENjA7Cn0KCiNkNWFpcm9mdGU1aSAubG9vcExpbmUgewogIHN0cm9rZS13aWR0aDogMjsKICBzdHJva2UtZGFzaGFycmF5OiAnMiAyJzsKICBtYXJrZXItZW5kOiAndXJsKCNhcnJvd2hlYWQpJzsKICBzdHJva2U6ICMyREJENjA7Cn0KCiNkNWFpcm9mdGU1aSAubm90ZSB7CiAgc3Ryb2tlOiAjMkRCRDYwOwogIGZpbGw6ICNGOUZGRkI7Cn0KCiNkNWFpcm9mdGU1aSAubm90ZVRleHQgewogIGZpbGw6ICMyREJENjA7CiAgc3Ryb2tlOiAjMkRCRDYwOwp9CgoKI2Q1YWlyb2Z0ZTVpIC5zZWN0aW9uewogIG9wYWNpdHk6MTsKfQojZDVhaXJvZnRlNWkgLnNlY3Rpb24wLCNkNWFpcm9mdGU1aSAgLnNlY3Rpb24yIHsKICBmaWxsOiAjRUNGN0YwOwp9CgojZDVhaXJvZnRlNWkgLnNlY3Rpb24xLAojZDVhaXJvZnRlNWkgLnNlY3Rpb24zIHsKICBmaWxsOiAjRkZGOwp9CiNkNWFpcm9mdGU1aSAudGFza1RleHQwLAojZDVhaXJvZnRlNWkgLnRhc2tUZXh0MSwKI2Q1YWlyb2Z0ZTVpIC50YXNrVGV4dDIsCiNkNWFpcm9mdGU1aSAudGFza1RleHQzIHsKICBmaWxsOiAjZmZmOwp9CgojZDVhaXJvZnRlNWkgLnRhc2swLAojZDVhaXJvZnRlNWkgLnRhc2sxLAojZDVhaXJvZnRlNWkgLnRhc2syLAojZDVhaXJvZnRlNWkgLnRhc2szIHsKICBmaWxsOiAjMkRCRDYwOwogIHN0cm9rZTogIzM1OUY1QTsKfQo8L3N0eWxlPjxzdHlsZT4jZDVhaXJvZnRlNWkgewogICAgY29sb3I6IHJnYigyNDQsIDI0NCwgMjQ0KTsKICAgIGZvbnQ6IG5vcm1hbCBub3JtYWwgbm9ybWFsIG5vcm1hbCAxNHB4LzIyLjM5OTk5OTYxODUzMDI3M3B4IG1vbm9zcGFjZTsKICB9PC9zdHlsZT48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIsIC0xMikiPjxnIGNsYXNzPSJvdXRwdXQiPjxnIGNsYXNzPSJjbHVzdGVycyI+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aHMiPjxnIGNsYXNzPSJlZGdlUGF0aCIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTg1LjU5Mzc1LDM4LjE0MDYyNUwxMTAuNTkzNzUsMzguMTQwNjI1TDEzNS41OTM3NSwzOC4xNDA2MjUiIG1hcmtlci1lbmQ9InVybCgjYXJyb3doZWFkNTQ3MSkiIHN0eWxlPSJzdHJva2U6ICMzMzM7IHN0cm9rZS13aWR0aDogMS41cHg7ZmlsbDpub25lIj48L3BhdGg+PGRlZnM+PG1hcmtlciBpZD0iYXJyb3doZWFkNTQ3MSIgdmlld0JveD0iMCAwIDEwIDEwIiByZWZYPSI5IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI4IiBtYXJrZXJIZWlnaHQ9IjYiIG9yaWVudD0iYXV0byI+PHBhdGggZD0iTSAwIDAgTCAxMCA1IEwgMCAxMCB6IiBjbGFzcz0iYXJyb3doZWFkUGF0aCIgc3R5bGU9InN0cm9rZS13aWR0aDogMXB4OyBzdHJva2UtZGFzaGFycmF5OiAxcHgsIDBweDsiPjwvcGF0aD48L21hcmtlcj48L2RlZnM+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aCIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTIzNi4zOTA2MjUsMzguMTQwNjI1TDI2MS4zOTA2MjUsMzguMTQwNjI1TDI4Ni4zOTA2MjUsMzguMTQwNjI1IiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93aGVhZDU0NzIpIiBzdHlsZT0ic3Ryb2tlOiAjMzMzOyBzdHJva2Utd2lkdGg6IDEuNXB4O2ZpbGw6bm9uZSI+PC9wYXRoPjxkZWZzPjxtYXJrZXIgaWQ9ImFycm93aGVhZDU0NzIiIHZpZXdCb3g9IjAgMCAxMCAxMCIgcmVmWD0iOSIgcmVmWT0iNSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBtYXJrZXJXaWR0aD0iOCIgbWFya2VySGVpZ2h0PSI2IiBvcmllbnQ9ImF1dG8iPjxwYXRoIGQ9Ik0gMCAwIEwgMTAgNSBMIDAgMTAgeiIgY2xhc3M9ImFycm93aGVhZFBhdGgiIHN0eWxlPSJzdHJva2Utd2lkdGg6IDFweDsgc3Ryb2tlLWRhc2hhcnJheTogMXB4LCAwcHg7Ij48L3BhdGg+PC9tYXJrZXI+PC9kZWZzPjwvZz48ZyBjbGFzcz0iZWRnZVBhdGgiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHBhdGggY2xhc3M9InBhdGgiIGQ9Ik0zODYuNjU2MjUsMzguMTQwNjI1TDQxMS42NTYyNSwzOC4xNDA2MjVMNDM2LjY1NjI1LDM4LjE0MDYyNSIgbWFya2VyLWVuZD0idXJsKCNhcnJvd2hlYWQ1NDczKSIgc3R5bGU9InN0cm9rZTogIzMzMzsgc3Ryb2tlLXdpZHRoOiAxLjVweDtmaWxsOm5vbmUiPjwvcGF0aD48ZGVmcz48bWFya2VyIGlkPSJhcnJvd2hlYWQ1NDczIiB2aWV3Qm94PSIwIDAgMTAgMTAiIHJlZlg9IjkiIHJlZlk9IjUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgbWFya2VyV2lkdGg9IjgiIG1hcmtlckhlaWdodD0iNiIgb3JpZW50PSJhdXRvIj48cGF0aCBkPSJNIDAgMCBMIDEwIDUgTCAwIDEwIHoiIGNsYXNzPSJhcnJvd2hlYWRQYXRoIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxcHg7IHN0cm9rZS1kYXNoYXJyYXk6IDFweCwgMHB4OyI+PC9wYXRoPjwvbWFya2VyPjwvZGVmcz48L2c+PGcgY2xhc3M9ImVkZ2VQYXRoIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxwYXRoIGNsYXNzPSJwYXRoIiBkPSJNNDg0LjI2NTYyNSwzOC4xNDA2MjVMNTA5LjI2NTYyNSwzOC4xNDA2MjVMNTM0LjI2NTYyNSwzOC4xNDA2MjUiIG1hcmtlci1lbmQ9InVybCgjYXJyb3doZWFkNTQ3NCkiIHN0eWxlPSJzdHJva2U6ICMzMzM7IHN0cm9rZS13aWR0aDogMS41cHg7ZmlsbDpub25lIj48L3BhdGg+PGRlZnM+PG1hcmtlciBpZD0iYXJyb3doZWFkNTQ3NCIgdmlld0JveD0iMCAwIDEwIDEwIiByZWZYPSI5IiByZWZZPSI1IiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiIG1hcmtlcldpZHRoPSI4IiBtYXJrZXJIZWlnaHQ9IjYiIG9yaWVudD0iYXV0byI+PHBhdGggZD0iTSAwIDAgTCAxMCA1IEwgMCAxMCB6IiBjbGFzcz0iYXJyb3doZWFkUGF0aCIgc3R5bGU9InN0cm9rZS13aWR0aDogMXB4OyBzdHJva2UtZGFzaGFycmF5OiAxcHgsIDBweDsiPjwvcGF0aD48L21hcmtlcj48L2RlZnM+PC9nPjxnIGNsYXNzPSJlZGdlUGF0aCIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cGF0aCBjbGFzcz0icGF0aCIgZD0iTTYyMS43MTg3NSwzOC4xNDA2MjVMNjQ2LjcxODc1LDM4LjE0MDYyNUw2NzEuNzE4NzUsMzguMTQwNjI1IiBtYXJrZXItZW5kPSJ1cmwoI2Fycm93aGVhZDU0NzUpIiBzdHlsZT0ic3Ryb2tlOiAjMzMzOyBzdHJva2Utd2lkdGg6IDEuNXB4O2ZpbGw6bm9uZSI+PC9wYXRoPjxkZWZzPjxtYXJrZXIgaWQ9ImFycm93aGVhZDU0NzUiIHZpZXdCb3g9IjAgMCAxMCAxMCIgcmVmWD0iOSIgcmVmWT0iNSIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIiBtYXJrZXJXaWR0aD0iOCIgbWFya2VySGVpZ2h0PSI2IiBvcmllbnQ9ImF1dG8iPjxwYXRoIGQ9Ik0gMCAwIEwgMTAgNSBMIDAgMTAgeiIgY2xhc3M9ImFycm93aGVhZFBhdGgiIHN0eWxlPSJzdHJva2Utd2lkdGg6IDFweDsgc3Ryb2tlLWRhc2hhcnJheTogMXB4LCAwcHg7Ij48L3BhdGg+PC9tYXJrZXI+PC9kZWZzPjwvZz48ZyBjbGFzcz0iZWRnZVBhdGgiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHBhdGggY2xhc3M9InBhdGgiIGQ9Ik03NTEuNzY1NjI1LDM4LjE0MDYyNUw3NzYuNzY1NjI1LDM4LjE0MDYyNUw4MDEuNzY1NjI1LDM4LjE0MDYyNSIgbWFya2VyLWVuZD0idXJsKCNhcnJvd2hlYWQ1NDc2KSIgc3R5bGU9InN0cm9rZTogIzMzMzsgc3Ryb2tlLXdpZHRoOiAxLjVweDtmaWxsOm5vbmUiPjwvcGF0aD48ZGVmcz48bWFya2VyIGlkPSJhcnJvd2hlYWQ1NDc2IiB2aWV3Qm94PSIwIDAgMTAgMTAiIHJlZlg9IjkiIHJlZlk9IjUiIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCIgbWFya2VyV2lkdGg9IjgiIG1hcmtlckhlaWdodD0iNiIgb3JpZW50PSJhdXRvIj48cGF0aCBkPSJNIDAgMCBMIDEwIDUgTCAwIDEwIHoiIGNsYXNzPSJhcnJvd2hlYWRQYXRoIiBzdHlsZT0ic3Ryb2tlLXdpZHRoOiAxcHg7IHN0cm9rZS1kYXNoYXJyYXk6IDFweCwgMHB4OyI+PC9wYXRoPjwvbWFya2VyPjwvZGVmcz48L2c+PC9nPjxnIGNsYXNzPSJlZGdlTGFiZWxzIj48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48ZyBjbGFzcz0iZWRnZUxhYmVsIiB0cmFuc2Zvcm09IiIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIiBjbGFzcz0ibGFiZWwiPjxyZWN0IHJ4PSIwIiByeT0iMCIgd2lkdGg9IjAiIGhlaWdodD0iMCIgc3R5bGU9ImZpbGw6I2U4ZThlODsiPjwvcmVjdD48dGV4dD48dHNwYW4geG1sOnNwYWNlPSJwcmVzZXJ2ZSIgZHk9IjFlbSIgeD0iMSI+PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48L2c+PGcgY2xhc3M9Im5vZGVzIj48ZyBjbGFzcz0ibm9kZSIgaWQ9InJlcXVlc3QiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUyLjc5Njg3NSwzOC4xNDA2MjUpIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxyZWN0IHJ4PSIwIiByeT0iMCIgeD0iLTMyLjc5Njg3NSIgeT0iLTE4LjE0MDYyNSIgd2lkdGg9IjY1LjU5Mzc1IiBoZWlnaHQ9IjM2LjI4MTI1Ij48L3JlY3Q+PGcgY2xhc3M9ImxhYmVsIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDApIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjIuNzk2ODc1LC04LjE0MDYyNSkiPjx0ZXh0Pjx0c3BhbiB4bWw6c3BhY2U9InByZXNlcnZlIiBkeT0iMWVtIiB4PSIxIj5yZXF1ZXN0PC90c3Bhbj48L3RleHQ+PC9nPjwvZz48L2c+PGcgY2xhc3M9Im5vZGUiIGlkPSJJZGVudGlmaWNhdGlvbiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg1Ljk5MjE4NzUsMzguMTQwNjI1KSIgc3R5bGU9Im9wYWNpdHk6IDE7Ij48cmVjdCByeD0iMCIgcnk9IjAiIHg9Ii01MC4zOTg0Mzc1IiB5PSItMTguMTQwNjI1IiB3aWR0aD0iMTAwLjc5Njg3NSIgaGVpZ2h0PSIzNi4yODEyNSI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQwLjM5ODQzNzUsLTguMTQwNjI1KSI+PHRleHQ+PHRzcGFuIHhtbDpzcGFjZT0icHJlc2VydmUiIGR5PSIxZW0iIHg9IjEiPklkZW50aWZpY2F0aW9uPC90c3Bhbj48L3RleHQ+PC9nPjwvZz48L2c+PGcgY2xhc3M9Im5vZGUiIGlkPSJzZXJ2aWNlLW5hbWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMzNi41MjM0Mzc1LDM4LjE0MDYyNSkiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHJlY3Qgcng9IjAiIHJ5PSIwIiB4PSItNTAuMTMyODEyNSIgeT0iLTE4LjE0MDYyNSIgd2lkdGg9IjEwMC4yNjU2MjUiIGhlaWdodD0iMzYuMjgxMjUiPjwvcmVjdD48ZyBjbGFzcz0ibGFiZWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMCkiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00MC4xMzI4MTI1LC04LjE0MDYyNSkiPjx0ZXh0Pjx0c3BhbiB4bWw6c3BhY2U9InByZXNlcnZlIiBkeT0iMWVtIiB4PSIxIj5zZXJ2aWNlLW5hbWU8L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZSIgaWQ9ImR0YWIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQ2MC40NjA5Mzc1LDM4LjE0MDYyNSkiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHJlY3Qgcng9IjAiIHJ5PSIwIiB4PSItMjMuODA0Njg3NSIgeT0iLTE4LjE0MDYyNSIgd2lkdGg9IjQ3LjYwOTM3NSIgaGVpZ2h0PSIzNi4yODEyNSI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEzLjgwNDY4NzUsLTguMTQwNjI1KSI+PHRleHQ+PHRzcGFuIHhtbDpzcGFjZT0icHJlc2VydmUiIGR5PSIxZW0iIHg9IjEiPmR0YWI8L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZSIgaWQ9ImNsaWVudG5hbWUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU3Ny45OTIxODc1LDM4LjE0MDYyNSkiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHJlY3Qgcng9IjAiIHJ5PSIwIiB4PSItNDMuNzI2NTYyNSIgeT0iLTE4LjE0MDYyNSIgd2lkdGg9Ijg3LjQ1MzEyNSIgaGVpZ2h0PSIzNi4yODEyNSI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMzLjcyNjU2MjUsLTguMTQwNjI1KSI+PHRleHQ+PHRzcGFuIHhtbDpzcGFjZT0icHJlc2VydmUiIGR5PSIxZW0iIHg9IjEiPmNsaWVudG5hbWU8L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZSIgaWQ9InJlc29sdXRpb24iIHRyYW5zZm9ybT0idHJhbnNsYXRlKDcxMS43NDIxODc1LDM4LjE0MDYyNSkiIHN0eWxlPSJvcGFjaXR5OiAxOyI+PHJlY3Qgcng9IjAiIHJ5PSIwIiB4PSItNDAuMDIzNDM3NSIgeT0iLTE4LjE0MDYyNSIgd2lkdGg9IjgwLjA0Njg3NSIgaGVpZ2h0PSIzNi4yODEyNSI+PC9yZWN0PjxnIGNsYXNzPSJsYWJlbCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwwKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMwLjAyMzQzNzUsLTguMTQwNjI1KSI+PHRleHQ+PHRzcGFuIHhtbDpzcGFjZT0icHJlc2VydmUiIGR5PSIxZW0iIHg9IjEiPnJlc29sdXRpb248L3RzcGFuPjwvdGV4dD48L2c+PC9nPjwvZz48ZyBjbGFzcz0ibm9kZSIgaWQ9InJlcGxpY2FzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MzUuMTk1MzEyNSwzOC4xNDA2MjUpIiBzdHlsZT0ib3BhY2l0eTogMTsiPjxyZWN0IHJ4PSIwIiByeT0iMCIgeD0iLTMzLjQyOTY4NzUiIHk9Ii0xOC4xNDA2MjUiIHdpZHRoPSI2Ni44NTkzNzUiIGhlaWdodD0iMzYuMjgxMjUiPjwvcmVjdD48ZyBjbGFzcz0ibGFiZWwiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsMCkiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMy40Mjk2ODc1LC04LjE0MDYyNSkiPjx0ZXh0Pjx0c3BhbiB4bWw6c3BhY2U9InByZXNlcnZlIiBkeT0iMWVtIiB4PSIxIj5yZXBsaWNhczwvdHNwYW4+PC90ZXh0PjwvZz48L2c+PC9nPjwvZz48L2c+PC9nPjwvc3ZnPg==
```

配置模块说明

|名称   |描述                  |
|-------|----------------------|
|admin  |管理                  |
|namers |通过哪种方式，服务发现|
|routers|路由的详细配置        |
|       |                      |

下载安装包

> wget https://github.com/linkerd/linkerd/releases/download/1.6.0/linkerd\-1.6.0.tgz

解压

> tar \-xvf linkerd\-1.6.0.tgz

添加配置文件

```
cd /linkerd-1.6.0/config
touch config/linkerd.yaml
vim config/linkerd.yaml
```

这里先用一个最简单，先确定测试跑起来

```
admin:
  ip: 0.0.0.0
  port: 9990

namers:
- kind: io.l5d.fs
  rootDir: disco

routers:
- protocol: http
  dtab: |
    /svc => /#/io.l5d.fs;
  httpAccessLog: logs/access.log
  label: int
  servers:
  - port: 4140
    ip: 0.0.0.0
```

阿里云打开3个端口

> 9990 WEB\-UI管理界面
> 
> 
> 4140 http & 4141 grpc

添加一个服务IP:PORT,做测试

```
cd disco
touch test1
vim test1
127.0.0.1 7771
```

随便找个进程软件（apache nginx），改下端口号，开启监听7771

启动

> ./linkerd config/linkerd.yaml

启动加日志

> \-log.level=ALL \-log.output=all.log

查看下可视化，是否正常

> http://8.142.177.235:9990

metrics

> http://39.107.127.244:9990/admin/metrics.json

测试，发一个请求

> curl \-H 'Host:test1' http://127.0.0.1:4140

我们要请求服务名为：test1

通过设置HTTP的header的host=test1

1. linkerd接收到这个请求，会去disco目录下的test1文件中的配置的IP:PORT
2. 将请求转发这个IP:PORT，这里配置的是7771端口号
3. 将返回结果再返回给调用方

上面在请求过程中，是将header中的host设定为service名称

现在改一下curl 中 \-H 的Host 这个key

> curl \-H "test\-header:test1" http://127.0.0.1:4140

修改如下配置文件即可

```
- protocol: http
//添加下面两行
identifier:kind: io.l5d.header
header：test-header
```

另外，不光光一定要用header做service name识别，下面还有几种方法：

1. method
2. post get
3. path

应用场景不同，使用的类型不同

## namerd

以上服务发现\(IP:PORT\)都是 file\-base ，通过配置文件，来实现服务发现\-代理，不可动态变更,namerd就是直接将请求转向3方，如：ETCD CONSUL

官方配置文档

> https://api.linkerd.io/1.1.2/namerd/index.html\#introduction

下载包：namerd namerctl

> https://github.com/linkerd/namerctl/releases/download/0.8.6/namerctl\_linux\_amd64

先配置namerd

touch /soft/linkerd/config/namerd.yaml

```
#后台UI管理
admin:
  ip: 0.0.0.0
  port: 9991

#所有的配置读取完后，缓存在内存中
storage:
  kind: io.l5d.inMemory
namers:
- kind: io.l5d.fs
  rootDir: disco
interfaces:
- kind: io.l5d.thriftNameInterpreter
  port: 4100
  ip: 0.0.0.0
- kind: io.l5d.httpController
  ip: 0.0.0.0
  port: 4321
```

启动namerd

> ./namerd config/namerd.yaml

端口：4100 4321 9991

> 测试下，打开可视化管理
> 
> 
> http://8.142.177.235:9991/

能显示，但是会报错

修改linkerd

注销掉如下两行

```
#dtab: |
#  /svc => /#/io.l5d.fs;
```

添加两行：

```
 interpreter:
    kind: io.l5d.namerd
    dst: /$/inet/127.0.0.1/4100
    namespace: web
```

重启linkerd

创建一个新的dtab配置文件

> touch /soft/linkerd/config/dtab\-config

设置一条路由，将所有请求转向fs处理

> /svc =\> /\#/io.l5d.fs;

现在，动态创建一个规则：

> ./namerctl dtab create web config/dtab\-config \-\-base\-url http://127.0.0.1:4321

打开可视化，查看下刚刚添加的web

> http://8.142.177.235:9991/

测试一下

curl \-H "Host:test1" http://127.0.0.1:4140

至此，基础的工作。。。都讲完了，虽然各种细节还没有

## consul

下载安装包

> https://releases.hashicorp.com/consul/1.8.0/consul\_1.8.0\_linux\_amd64.zip

> unzip consul\_1.8.0\_linux\_amd64.zip
> 
> 
> mv consul /soft

启动

> ./consul agent \-dev \-ui \-node=consul\_node\_dev \-client=0.0.0.0

阿里云 开 8500

> http://8.142.177.235:8500

优雅关闭consul

> ./consul leave

创建读取服务的目录

> mkdir consul.d

注册一个服务:以配置文件的方式

```
cd consul.d
touch test.json
vim test.json
{"service":{"id": "test","name": "test","address": "127.0.0.1","port": 80,"tags": ["dev"]}}
```

重新启动consul

> ./consul agent \-dev \-ui \-node=consul\-dev \-client=0.0.0.0 \-config\-dir consul.d \-pid\-file=/tmp/consul.pid

查看下刚刚注册的服务

> http://8.142.177.235:8500

动态 HTTP 注册

> curl \-X PUT \-d '{"id": "test2","name": "test","address": "127.0.0.1","port": 80,"tags": \["dev"\]}' http://127.0.0.1:8500/v1/agent/service/register

服务发现

> curl localhost:8500/v1/catalog/service/test

```
{
    "service":{
        "id":"test",
        "name":"test",
        "address":"39.107.127.244",
        "port":80,
        "tags":[
            "dev"
        ],
        "checks":[
            {
                "http":"http://127.0.0.1:80/",
                "tls_skip_verify":false,
                "method":"Get",
                "interval":"10s",
                "timeout":"1s"
            }
        ]
    }
}
```

---

简单科普下consul

agent client server

集群

注册service

发现service

8301:lan gossip

8302:wlan gossip

8500:http UI admin

8501：httpsapi端口，默认disabled

8502:grpc,默认disabled

8600:DNS

server\-\>Raft\-\>server

client\-\>Gossip\-\>client

client\-\>grpc\-\>server

默认启动：是server模式，也就是启动参数加了 \-server=true

node\-name:在集群中的，节点名称，需要唯一。默认走本地的hostname

Datacenter：数据中心，默认是dc1\(Segment: '\<all\>'\)

## namerd连接consul

linkerd配置文件不需要用

创建 namerd\-consul.yml

```
namers:
- kind: io.l5d.consul
  host: 127.0.0.1
  port: 8500
```

启动

> ./namerd config/namerd\-consul.yaml

创建 config/dtab\-config\-consul

```
/svc => /#/io.l5d.consul/dc1;
```

生成一个新的路由条目

./namerctl dtab create web config/dtab\-config\-consul \-\-base\-url http://127.0.0.1:4321

测试linkerd日志

> cat /tmp/linkerd.log |awk '{print $1}'|sort |uniq \-c

%E7%9B%B8%E5%85%B3%E6%96%87%E6%A1%A3%0A\-\-\-\-%0A%E5%AE%98%E6%96%B9%E5%AE%89%E8%A3%85%E6%96%87%E6%A1%A3%0A%3Ehttps%3A%2F%2Fwww.bookstack.cn%2Fread%2Flinkerd%2Fdoc\-getting\-started\-locally.md%0A%0A%E5%AE%98%E6%96%B9%E9%85%8D%E7%BD%AE%E6%96%87%E6%A1%A3%0A%3Ehttps%3A%2F%2Fapi.linkerd.io%2Fhead%2Flinkerd%2Findex.html%23introduction%0A%0Afinagle%E6%96%87%E6%A1%A3%0A%3Ehttps%3A%2F%2Ftwitter.github.io%2Ffinagle%2Fguide%2FClients.html%23load\-balancing%0A%0A%E5%9B%BD%E5%86%85%E7%89%88%E5%AD%A6%E4%B9%A0%E6%96%87%E6%A1%A3%0A%3Ehttps%3A%2F%2Fgitchat.csdn.net%2FcolumnTopic%2F5a3757cfd7fd136499739b8e%0A%0A%0A%E5%85%88%E5%AE%89%E8%A3%85%20JDK%0A%0A%0A%E6%A6%82%E8%A7%88%0A\-\-\-\-%0Alinkerd%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%EF%BC%9A%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BB%A3%E7%90%86%E5%99%A8%EF%BC%8C%E6%9C%89%E7%82%B9%E7%B1%BB%E4%BC%BC%E7%BD%91%E5%85%B3%EF%BC%88%E4%BD%86%E4%B8%8D%E6%98%AF%E7%9C%9F%E7%9A%84%E7%BD%91%E5%85%B3%EF%BC%89%0A%0A\!%5Bf7828ccb0d6ff9f4096482ea19a3beb3.png%5D\(evernotecid%3A%2F%2F48EFC692\-6DE3\-4EEF\-8E65\-DB61EC1E8D7A%2Fappyinxiangcom%2F35868219%2FENResource%2Fp59\)%0A%0A%0ALINKERD%E7%9A%84%E4%BD%9C%E7%94%A8%EF%BC%9A%0A1.%20%E5%9F%BA%E4%BA%8E%E6%84%9F%E7%9F%A5%E6%97%B6%E5%BB%B6%E7%9A%84%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%0A2.%20%E8%BF%90%E8%A1%8C%E6%97%B6%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%0A3.%20%E7%86%94%E6%96%AD%E6%9C%BA%E5%88%B6%E3%80%81%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%0A4.%20%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E7%AE%A1%E7%90%86%0A5.%20%E5%A4%9A%E5%8D%8F%E8%AE%AE%E5%85%BC%E5%AE%B9%0A%0A%0A%E6%B3%A8%E6%84%8F%EF%BC%9A%E8%AF%B4%E5%AE%83%E4%B8%8D%E6%98%AF%E7%9C%9F%E7%9A%84%E4%BC%A0%E7%BB%9F%E5%9E%8B%E7%BD%91%E5%85%B3%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%AE%83%E6%98%AF%E4%BD%9C%E7%94%A8%E5%9C%A8client%E4%BB%A5sidecar%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%9C%A8client%E7%AB%AF%E5%BC%80%E4%B8%80%E4%B8%AAlinkerd%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4%0A%0A%E7%BC%BA%E7%82%B9%EF%BC%9A%E5%9B%A0%E5%85%B6%E8%BF%90%E8%A1%8C%E5%9C%A8client%E7%AB%AF%EF%BC%8C%E6%9B%B4%E9%80%82%E5%90%88%E5%90%8E%E7%AB%AF%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8%0A%0A%3El5d%EF%BC%9Alinkerd%20%E7%BC%A9%E5%86%99%2C%E5%85%B6%E4%B8%AD5%3Ainker%EF%BC%8C%E4%BB%A3%E7%90%865%E4%B8%AA%E5%AD%97%E6%AF%8D%0A%0A%E5%86%85%E9%83%A8%E6%A8%A1%E5%9D%97%E6%B5%81%E8%BD%AC%0A%0A%7C%20%E5%90%8D%E7%A7%B0%20%7C%20%E6%8F%8F%E8%BF%B0%20%7C%0A%7C%20\-\-\-%20%7C%20\-\-\-%20%7C%0A%7C%20Identifier%20%7C%20%E6%A0%B9%E6%8D%AE%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99%EF%BC%8C%E8%AF%86%E5%88%AB%E5%87%BA%E8%AF%B7%E6%B1%82%E7%9A%84service\-name%20%7C%0A%7C%20dtab%20%7C%20delegation%20table%2F%E5%A7%94%E6%89%98%E8%A1%A8%E7%9A%84%E7%AE%80%E7%A7%B0%20%7C%0A%7Cbindding%20%20%7C%E6%A0%B9%E6%8D%AEservice\-name%E5%8E%BBdtab%E6%89%BE%E5%AF%BB%E6%9D%A1%E7%9B%AE%EF%BC%8C%E8%BF%9B%E8%A1%8C%20%E7%BB%91%E5%AE%9A%EF%BC%8C%E6%89%BE%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%E8%A7%A3%E9%87%8A%E5%99%A8%20%7C%0A%7CResolution%20%20%7C%E6%A0%B9%E6%8D%AEservice\-name%20%E8%A7%A3%E6%9E%90%E5%87%BA%E4%B8%80%E4%B8%AA%20IP%3APORT%20%20%7C%0A%0A%60%60%60mermaid%0Agraph%20LR%0Arequest\-\-%3EIdentification%0AIdentification\-\-%3Eservice\-name%0Aservice\-name\-\-%3Edtab%0Adtab\-\-%3Eclientname%0Aclientname\-\-%3Eresolution%0Aresolution\-\-%3Ereplicas%0A%60%60%60%0A%0A%0A%E9%85%8D%E7%BD%AE%E6%A8%A1%E5%9D%97%E8%AF%B4%E6%98%8E%0A%7C%20%E5%90%8D%E7%A7%B0%20%7C%20%E6%8F%8F%E8%BF%B0%20%7C%0A%7C%20\-\-\-%20%7C%20\-\-\-%20%7C%0A%7C%20admin%20%7C%20%E7%AE%A1%E7%90%86%20%7C%0A%7C%20namers%20%7C%20%E9%80%9A%E8%BF%87%E5%93%AA%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%20%7C%0A%7C%20routers%20%7C%20%E8%B7%AF%E7%94%B1%E7%9A%84%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%20%7C%0A%7C%20%20%7C%20%20%7C%0A%0A%0A%20%20%20%20%20%20%0A%0A%0A%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85%0A%3Ewget%20https%3A%2F%2Fgithub.com%2Flinkerd%2Flinkerd%2Freleases%2Fdownload%2F1.6.0%2Flinkerd\-1.6.0.tgz%0A%0A%E8%A7%A3%E5%8E%8B%0A%3Etar%20\-xvf%20linkerd\-1.6.0.tgz%0A%0A%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%60%60%60%0Acd%20%2Flinkerd\-1.6.0%2Fconfig%0Atouch%20config%2Flinkerd.yaml%0Avim%20config%2Flinkerd.yaml%0A%60%60%60%60%0A%E8%BF%99%E9%87%8C%E5%85%88%E7%94%A8%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%EF%BC%8C%E5%85%88%E7%A1%AE%E5%AE%9A%E6%B5%8B%E8%AF%95%E8%B7%91%E8%B5%B7%E6%9D%A5%0A%60%60%60%0Aadmin%3A%0A%20%20ip%3A%200.0.0.0%0A%20%20port%3A%209990%0A%0Anamers%3A%0A\-%20kind%3A%20io.l5d.fs%0A%20%20rootDir%3A%20disco%0A%0Arouters%3A%0A\-%20protocol%3A%20http%0A%20%20dtab%3A%20%7C%0A%20%20%20%20%2Fsvc%20%3D%3E%20%2F%23%2Fio.l5d.fs%3B%0A%20%20httpAccessLog%3A%20logs%2Faccess.log%0A%20%20label%3A%20int%0A%20%20servers%3A%0A%20%20\-%20port%3A%204140%0A%20%20%20%20ip%3A%200.0.0.0%0A%60%60%60%0A%E9%98%BF%E9%87%8C%E4%BA%91%E6%89%93%E5%BC%803%E4%B8%AA%E7%AB%AF%E5%8F%A3%20%0A%3E9990%20WEB\-UI%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%0A%3E4140%20http%20%26%204141%20grpc%20%20%0A%0A%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1IP%3APORT%2C%E5%81%9A%E6%B5%8B%E8%AF%95%0A%60%60%60%0Acd%20disco%0Atouch%20test1%0Avim%20test1%0A127.0.0.1%207771%0A%60%60%60%0A%0A%E9%9A%8F%E4%BE%BF%E6%89%BE%E4%B8%AA%E8%BF%9B%E7%A8%8B%E8%BD%AF%E4%BB%B6%EF%BC%88apache%20nginx%EF%BC%89%EF%BC%8C%E6%94%B9%E4%B8%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7%EF%BC%8C%E5%BC%80%E5%90%AF%E7%9B%91%E5%90%AC7771%0A%0A%E5%90%AF%E5%8A%A8%0A%3E.%2Flinkerd%20config%2Flinkerd.yaml%0A%3E%0A%E5%90%AF%E5%8A%A8%E5%8A%A0%E6%97%A5%E5%BF%97%0A%3E\-log.level%3DALL%20\-log.output%3Dall.log%0A%0A%0A%E6%9F%A5%E7%9C%8B%E4%B8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%8C%E6%98%AF%E5%90%A6%E6%AD%A3%E5%B8%B8%0A%3Ehttp%3A%2F%2F8.142.177.235%3A9990%0A%0Ametrics%0A%3Ehttp%3A%2F%2F39.107.127.244%3A9990%2Fadmin%2Fmetrics.json%0A%0A%E6%B5%8B%E8%AF%95%EF%BC%8C%E5%8F%91%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%0A%3Ecurl%20\-H%20'Host%3Atest1'%20%20http%3A%2F%2F127.0.0.1%3A4140%0A%0A%0A%E6%88%91%E4%BB%AC%E8%A6%81%E8%AF%B7%E6%B1%82%E6%9C%8D%E5%8A%A1%E5%90%8D%E4%B8%BA%EF%BC%9Atest1%0A%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AEHTTP%E7%9A%84header%E7%9A%84host%3Dtest1%0A%0A1.%20linkerd%E6%8E%A5%E6%94%B6%E5%88%B0%E8%BF%99%E4%B8%AA%E8%AF%B7%E6%B1%82%EF%BC%8C%E4%BC%9A%E5%8E%BBdisco%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84test1%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE%E7%9A%84IP%3APORT%0A2.%20%E5%B0%86%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E8%BF%99%E4%B8%AAIP%3APORT%EF%BC%8C%E8%BF%99%E9%87%8C%E9%85%8D%E7%BD%AE%E7%9A%84%E6%98%AF7771%E7%AB%AF%E5%8F%A3%E5%8F%B7%0A3.%20%E5%B0%86%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%E5%86%8D%E8%BF%94%E5%9B%9E%E7%BB%99%E8%B0%83%E7%94%A8%E6%96%B9%0A%0A%E4%B8%8A%E9%9D%A2%E5%9C%A8%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%E4%B8%AD%EF%BC%8C%E6%98%AF%E5%B0%86header%E4%B8%AD%E7%9A%84host%E8%AE%BE%E5%AE%9A%E4%B8%BAservice%E5%90%8D%E7%A7%B0%0A%0A%E7%8E%B0%E5%9C%A8%E6%94%B9%E4%B8%80%E4%B8%8Bcurl%20%E4%B8%AD%20\-H%20%20%E7%9A%84Host%20%E8%BF%99%E4%B8%AAkey%0A%0A%3Ecurl%20\-H%20%22test\-header%3Atest1%22%20http%3A%2F%2F127.0.0.1%3A4140%0A%0A%E4%BF%AE%E6%94%B9%E5%A6%82%E4%B8%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8D%B3%E5%8F%AF%0A%60%60%60%0A\-%20protocol%3A%20http%0A%2F%2F%E6%B7%BB%E5%8A%A0%E4%B8%8B%E9%9D%A2%E4%B8%A4%E8%A1%8C%0Aidentifier%3Akind%3A%20io.l5d.header%0Aheader%EF%BC%9Atest\-header%0A%60%60%60%0A%E5%8F%A6%E5%A4%96%EF%BC%8C%E4%B8%8D%E5%85%89%E5%85%89%E4%B8%80%E5%AE%9A%E8%A6%81%E7%94%A8header%E5%81%9Aservice%20name%E8%AF%86%E5%88%AB%EF%BC%8C%E4%B8%8B%E9%9D%A2%E8%BF%98%E6%9C%89%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%9A%0A1.%20method%0A2.%20post%20get%0A3.%20path%0A%0A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8D%E5%90%8C%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%8D%E5%90%8C%0A%0Anamerd%0A\-\-\-\-\-%0A%E4%BB%A5%E4%B8%8A%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0\(IP%3APORT\)%E9%83%BD%E6%98%AF%20file\-base%20%EF%BC%8C%E9%80%9A%E8%BF%87%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%9D%A5%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0\-%E4%BB%A3%E7%90%86%EF%BC%8C%E4%B8%8D%E5%8F%AF%E5%8A%A8%E6%80%81%E5%8F%98%E6%9B%B4%2Cnamerd%E5%B0%B1%E6%98%AF%E7%9B%B4%E6%8E%A5%E5%B0%86%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%90%913%E6%96%B9%EF%BC%8C%E5%A6%82%EF%BC%9AETCD%20CONSUL%0A%0A%E5%AE%98%E6%96%B9%E9%85%8D%E7%BD%AE%E6%96%87%E6%A1%A3%0A%3Ehttps%3A%2F%2Fapi.linkerd.io%2F1.1.2%2Fnamerd%2Findex.html%23introduction%0A%0A%E4%B8%8B%E8%BD%BD%E5%8C%85%EF%BC%9Anamerd%20%20namerctl%0A%3Ehttps%3A%2F%2Fgithub.com%2Flinkerd%2Fnamerctl%2Freleases%2Fdownload%2F0.8.6%2Fnamerctl\_linux\_amd64%0A%0A%E5%85%88%E9%85%8D%E7%BD%AEnamerd%0Atouch%20%2Fsoft%2Flinkerd%2Fconfig%2Fnamerd.yaml%20%20%0A%60%60%60%0A%23%E5%90%8E%E5%8F%B0UI%E7%AE%A1%E7%90%86%0Aadmin%3A%0A%20%20ip%3A%200.0.0.0%0A%20%20port%3A%209991%0A%0A%23%E6%89%80%E6%9C%89%E7%9A%84%E9%85%8D%E7%BD%AE%E8%AF%BB%E5%8F%96%E5%AE%8C%E5%90%8E%EF%BC%8C%E7%BC%93%E5%AD%98%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%0Astorage%3A%0A%20%20kind%3A%20io.l5d.inMemory%0Anamers%3A%0A\-%20kind%3A%20io.l5d.fs%0A%20%20rootDir%3A%20disco%0Ainterfaces%3A%0A\-%20kind%3A%20io.l5d.thriftNameInterpreter%0A%20%20port%3A%204100%0A%20%20ip%3A%200.0.0.0%0A\-%20kind%3A%20io.l5d.httpController%0A%20%20ip%3A%200.0.0.0%0A%20%20port%3A%204321%0A%60%60%60%0A%E5%90%AF%E5%8A%A8namerd%0A%3E.%2Fnamerd%20%20config%2Fnamerd.yaml%0A%0A%E7%AB%AF%E5%8F%A3%EF%BC%9A4100%204321%209991%20%09%0A%0A%3E%E6%B5%8B%E8%AF%95%E4%B8%8B%EF%BC%8C%E6%89%93%E5%BC%80%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%0Ahttp%3A%2F%2F8.142.177.235%3A9991%2F%0A%0A%E8%83%BD%E6%98%BE%E7%A4%BA%EF%BC%8C%E4%BD%86%E6%98%AF%E4%BC%9A%E6%8A%A5%E9%94%99%0A%0A%E4%BF%AE%E6%94%B9linkerd%0A%0A%E6%B3%A8%E9%94%80%E6%8E%89%E5%A6%82%E4%B8%8B%E4%B8%A4%E8%A1%8C%0A%60%60%60%0A%23dtab%3A%20%7C%0A%23%20%20%2Fsvc%20%3D%3E%20%2F%23%2Fio.l5d.fs%3B%0A%60%60%60%0A%E6%B7%BB%E5%8A%A0%E4%B8%A4%E8%A1%8C%EF%BC%9A%0A%60%60%60%0A%20interpreter%3A%0A%20%20%20%20kind%3A%20io.l5d.namerd%0A%20%20%20%20dst%3A%20%2F%24%2Finet%2F127.0.0.1%2F4100%0A%20%20%20%20namespace%3A%20web%0A%60%60%60%0A%E9%87%8D%E5%90%AFlinkerd%0A%0A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84dtab%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%0A%3Etouch%20%2Fsoft%2Flinkerd%2Fconfig%2Fdtab\-config%0A%0A%E8%AE%BE%E7%BD%AE%E4%B8%80%E6%9D%A1%E8%B7%AF%E7%94%B1%EF%BC%8C%E5%B0%86%E6%89%80%E6%9C%89%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%90%91fs%E5%A4%84%E7%90%86%0A%3E%2Fsvc%20%3D%3E%20%2F%23%2Fio.l5d.fs%3B%0A%0A%E7%8E%B0%E5%9C%A8%EF%BC%8C%E5%8A%A8%E6%80%81%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E8%A7%84%E5%88%99%EF%BC%9A%0A%3E%20.%2Fnamerctl%20dtab%20create%20web%20config%2Fdtab\-config%20\-\-base\-url%20http%3A%2F%2F127.0.0.1%3A4321%0A%0A%E6%89%93%E5%BC%80%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%8B%E5%88%9A%E5%88%9A%E6%B7%BB%E5%8A%A0%E7%9A%84web%0A%3Ehttp%3A%2F%2F8.142.177.235%3A9991%2F%20%20%20%0A%0A%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%0Acurl%20\-H%20%22Host%3Atest1%22%20http%3A%2F%2F127.0.0.1%3A4140%0A%0A%E8%87%B3%E6%AD%A4%EF%BC%8C%E5%9F%BA%E7%A1%80%E7%9A%84%E5%B7%A5%E4%BD%9C%E3%80%82%E3%80%82%E3%80%82%E9%83%BD%E8%AE%B2%E5%AE%8C%E4%BA%86%EF%BC%8C%E8%99%BD%E7%84%B6%E5%90%84%E7%A7%8D%E7%BB%86%E8%8A%82%E8%BF%98%E6%B2%A1%E6%9C%89%0A%0A%0Aconsul%0A\-\-\-\-%0A%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85%0A%3Ehttps%3A%2F%2Freleases.hashicorp.com%2Fconsul%2F1.8.0%2Fconsul\_1.8.0\_linux\_amd64.zip%0A%0A%3Eunzip%20consul\_1.8.0\_linux\_amd64.zip%0A%3Emv%20consul%20%2Fsoft%0A%0A%0A%E5%90%AF%E5%8A%A8%0A%3E.%2Fconsul%20agent%20\-dev%20\-ui%20\-node%3Dconsul\_node\_dev%20\-client%3D0.0.0.0%0A%0A%E9%98%BF%E9%87%8C%E4%BA%91%20%E5%BC%80%208500%0A%3Ehttp%3A%2F%2F8.142.177.235%3A8500%0A%0A%E4%BC%98%E9%9B%85%E5%85%B3%E9%97%ADconsul%0A%3E.%2Fconsul%20leave%0A%0A%E5%88%9B%E5%BB%BA%E8%AF%BB%E5%8F%96%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%9B%AE%E5%BD%95%0A%3Emkdir%20consul.d%0A%0A%E6%B3%A8%E5%86%8C%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%3A%E4%BB%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F%0A%60%60%60%0Acd%20consul.d%0Atouch%20test.json%0Avim%20test.json%0A%7B%22service%22%3A%7B%22id%22%3A%20%22test%22%2C%22name%22%3A%20%22test%22%2C%22address%22%3A%20%22127.0.0.1%22%2C%22port%22%3A%2080%2C%22tags%22%3A%20%5B%22dev%22%5D%7D%7D%0A%60%60%60%0A%0A%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8consul%0A%3E.%2Fconsul%20agent%20\-dev%20\-ui%20\-node%3Dconsul\-dev%20\-client%3D0.0.0.0%20\-config\-dir%20consul.d%20%20\-pid\-file%3D%2Ftmp%2Fconsul.pid%0A%0A%E6%9F%A5%E7%9C%8B%E4%B8%8B%E5%88%9A%E5%88%9A%E6%B3%A8%E5%86%8C%E7%9A%84%E6%9C%8D%E5%8A%A1%0A%3Ehttp%3A%2F%2F8.142.177.235%3A8500%0A%0A%E5%8A%A8%E6%80%81%20HTTP%20%E6%B3%A8%E5%86%8C%0A%3Ecurl%20\-X%20PUT%20\-d%20'%7B%22id%22%3A%20%22test2%22%2C%22name%22%3A%20%22test%22%2C%22address%22%3A%20%22127.0.0.1%22%2C%22port%22%3A%2080%2C%22tags%22%3A%20%5B%22dev%22%5D%7D'%20http%3A%2F%2F127.0.0.1%3A8500%2Fv1%2Fagent%2Fservice%2Fregister%0A%0A%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0%0A%3Ecurl%20%20localhost%3A8500%2Fv1%2Fcatalog%2Fservice%2Ftest%0A%60%60%60%0A%7B%0A%20%20%20%20%22service%22%3A%7B%0A%20%20%20%20%20%20%20%20%22id%22%3A%22test%22%2C%0A%20%20%20%20%20%20%20%20%22name%22%3A%22test%22%2C%0A%20%20%20%20%20%20%20%20%22address%22%3A%2239.107.127.244%22%2C%0A%20%20%20%20%20%20%20%20%22port%22%3A80%2C%0A%20%20%20%20%20%20%20%20%22tags%22%3A%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22dev%22%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%22checks%22%3A%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22http%22%3A%22http%3A%2F%2F127.0.0.1%3A80%2F%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22tls\_skip\_verify%22%3Afalse%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22method%22%3A%22Get%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22interval%22%3A%2210s%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22timeout%22%3A%221s%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%7D%0A%7D%0A%60%60%60%0A%0A\_\_\_\_\_%0A%E7%AE%80%E5%8D%95%E7%A7%91%E6%99%AE%E4%B8%8Bconsul%0A%0Aagent%20client%20server%0A%E9%9B%86%E7%BE%A4%0A%E6%B3%A8%E5%86%8Cservice%0A%E5%8F%91%E7%8E%B0service%0A%0A8301%3Alan%20gossip%0A8302%3Awlan%20gossip%0A8500%3Ahttp%20UI%20admin%0A8501%EF%BC%9Ahttpsapi%E7%AB%AF%E5%8F%A3%EF%BC%8C%E9%BB%98%E8%AE%A4disabled%0A8502%3Agrpc%2C%E9%BB%98%E8%AE%A4disabled%0A8600%3ADNS%0A%0A%0A%0A%0Aserver\-%3ERaft\-%3Eserver%0Aclient\-%3EGossip\-%3Eclient%0Aclient\-%3Egrpc\-%3Eserver%0A%0A%E9%BB%98%E8%AE%A4%E5%90%AF%E5%8A%A8%EF%BC%9A%E6%98%AFserver%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0%E5%8A%A0%E4%BA%86%20%20\-server%3Dtrue%0Anode\-name%3A%E5%9C%A8%E9%9B%86%E7%BE%A4%E4%B8%AD%E7%9A%84%EF%BC%8C%E8%8A%82%E7%82%B9%E5%90%8D%E7%A7%B0%EF%BC%8C%E9%9C%80%E8%A6%81%E5%94%AF%E4%B8%80%E3%80%82%E9%BB%98%E8%AE%A4%E8%B5%B0%E6%9C%AC%E5%9C%B0%E7%9A%84hostname%0ADatacenter%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%BF%83%EF%BC%8C%E9%BB%98%E8%AE%A4%E6%98%AFdc1\(Segment%3A%20'%3Call%3E'\)%0A%0A%0Anamerd%E8%BF%9E%E6%8E%A5consul%0A\-\-\-\-\-%0A%0Alinkerd%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%8D%E9%9C%80%E8%A6%81%E7%94%A8%0A%0A%E5%88%9B%E5%BB%BA%20namerd\-consul.yml%0A%60%60%60%0Anamers%3A%0A\-%20kind%3A%20io.l5d.consul%0A%20%20host%3A%20127.0.0.1%0A%20%20port%3A%208500%0A%60%60%60%0A%0A%E5%90%AF%E5%8A%A8%0A%3E.%2Fnamerd%20%20config%2Fnamerd\-consul.yaml%0A%0A%E5%88%9B%E5%BB%BA%20config%2Fdtab\-config\-consul%0A%60%60%60%0A%2Fsvc%20%3D%3E%20%2F%23%2Fio.l5d.consul%2Fdc1%3B%0A%60%60%60%0A%0A%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9B%AE%0A.%2Fnamerctl%20dtab%20create%20web%20config%2Fdtab\-config\-consul%20\-\-base\-url%20http%3A%2F%2F127.0.0.1%3A4321%0A%0A%0A%0A%E6%B5%8B%E8%AF%95linkerd%E6%97%A5%E5%BF%97%0A%3Ecat%20%2Ftmp%2Flinkerd.log%20%7Cawk%20'%7Bprint%20%241%7D'%7Csort%20%7Cuniq%20\-c%0A
