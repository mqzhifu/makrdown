# zipkin

一次trace由一组span组成

traceId:一个请求的，完整链路ID.

spanId:经过的每个节点，都会产生这个ID

parentId:spanId的父ID

collector:收集器

storage：存储器

memory mysql es

search：查找

webui：可视化管理工具

Annotation

基于一个sapn，的上下文信息

event type :

cs：Client Start,表示客户端发起请求 ；一个span的开始；

cr：Client Received,表示客户端获取到服务端返回信息；一个span的结束

```
 sr：Server Receive,表示服务端收到请求
 ss：Server Send,表示服务端完成处理，并将结果发送给客户端

sr-cs：网络延迟
ss-sr：逻辑处理时间
cr-cs：整个流程时间
```

简单理解：一个span是一次子请求，该请求的event type 就是详细描述的信息，且存于Annotation

%E4%B8%80%E6%AC%A1trace%E7%94%B1%E4%B8%80%E7%BB%84span%E7%BB%84%E6%88%90%0A%0A%0AtraceId%3A%E4%B8%80%E4%B8%AA%E8%AF%B7%E6%B1%82%E7%9A%84%EF%BC%8C%E5%AE%8C%E6%95%B4%E9%93%BE%E8%B7%AFID.%0AspanId%3A%E7%BB%8F%E8%BF%87%E7%9A%84%E6%AF%8F%E4%B8%AA%E8%8A%82%E7%82%B9%EF%BC%8C%E9%83%BD%E4%BC%9A%E4%BA%A7%E7%94%9F%E8%BF%99%E4%B8%AAID%0AparentId%3AspanId%E7%9A%84%E7%88%B6ID%0A%0Acollector%3A%E6%94%B6%E9%9B%86%E5%99%A8%0Astorage%EF%BC%9A%E5%AD%98%E5%82%A8%E5%99%A8%0Amemory%20mysql%20es%0Asearch%EF%BC%9A%E6%9F%A5%E6%89%BE%0Awebui%EF%BC%9A%E5%8F%AF%E8%A7%86%E5%8C%96%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7%0A%0A%0AAnnotation%0A%E5%9F%BA%E4%BA%8E%E4%B8%80%E4%B8%AAsapn%EF%BC%8C%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E4%BF%A1%E6%81%AF%0A%0Aevent%20type%20%3A%0A%20%20%20%20%20cs%EF%BC%9AClient%20Start%2C%E8%A1%A8%E7%A4%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82%20%EF%BC%9B%E4%B8%80%E4%B8%AAspan%E7%9A%84%E5%BC%80%E5%A7%8B%EF%BC%9B%0A%20%20%20%20%20cr%EF%BC%9AClient%20Received%2C%E8%A1%A8%E7%A4%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%8E%B7%E5%8F%96%E5%88%B0%E6%9C%8D%E5%8A%A1%E7%AB%AF%E8%BF%94%E5%9B%9E%E4%BF%A1%E6%81%AF%EF%BC%9B%E4%B8%80%E4%B8%AAspan%E7%9A%84%E7%BB%93%E6%9D%9F%0A%0A%20%20%20%20%20sr%EF%BC%9AServer%20Receive%2C%E8%A1%A8%E7%A4%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%94%B6%E5%88%B0%E8%AF%B7%E6%B1%82%0A%20%20%20%20%20ss%EF%BC%9AServer%20Send%2C%E8%A1%A8%E7%A4%BA%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%8C%E6%88%90%E5%A4%84%E7%90%86%EF%BC%8C%E5%B9%B6%E5%B0%86%E7%BB%93%E6%9E%9C%E5%8F%91%E9%80%81%E7%BB%99%E5%AE%A2%E6%88%B7%E7%AB%AF%0A%0A%20%20%20%20sr\-cs%EF%BC%9A%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%0A%20%20%20%20ss\-sr%EF%BC%9A%E9%80%BB%E8%BE%91%E5%A4%84%E7%90%86%E6%97%B6%E9%97%B4%0A%20%20%20%20cr\-cs%EF%BC%9A%E6%95%B4%E4%B8%AA%E6%B5%81%E7%A8%8B%E6%97%B6%E9%97%B4%0A%0A%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3%EF%BC%9A%E4%B8%80%E4%B8%AAspan%E6%98%AF%E4%B8%80%E6%AC%A1%E5%AD%90%E8%AF%B7%E6%B1%82%EF%BC%8C%E8%AF%A5%E8%AF%B7%E6%B1%82%E7%9A%84event%20type%20%E5%B0%B1%E6%98%AF%E8%AF%A6%E7%BB%86%E6%8F%8F%E8%BF%B0%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E4%B8%94%E5%AD%98%E4%BA%8EAnnotation%0A%0A%0A%0A%0AHTTP\_L5D\_CTX\_TRACE%0AHTTP\_L5D\_DST\_SERVICE%0AHTTP\_L5D\_DST\_CLIENT%0AHTTP\_L5D\_REQID%0A%0A%0A%0A%0A%E6%94%B6%E9%9B%86%20scrib
