# 游戏匹配-测试

1. HTTP 接口
    1. 报名
    2. 取消报名
2. 自动化测试
    1. 报名
        1. 基础参数测试
        2. 组队模式
            2。 吃鸡模式
3. rule 测试
    1. 基础参数测试

HTTP\-报名\-用例1：走一下最基本的流程.正常用工具请求，

```
{
  "addition": "diiiiii",
  "group_id": 1111,
  "player_list": [
    {
      "uid": 10,
      "weight_attr": {
        "level": 10,
        "age": 18
      }
    },
    {
      "uid": 11,
      "weight_attr": {
        "level": 10,
        "age": 18
      }
    }
  ],
  "rule_id": 1
}
```

1. 报名后，检查 redis 数据：
    1. PlayerManager\_rid\_player
    2. sign\_rid\_group\_person\_1
    3. sign\_rid\_group\_player
    4. sign\_rid\_group\_weight
    5. sign\_rid\_group\_element\_gid
    6. sign\_rid\_timeout
2. 等待10秒，让报名超时，看一下超时：
    上面6个队列的值均应该被删除
    超时后，PUSH会运作，查看 redis 数据：
    1. push\_ruleId\_pushId
    2. push\_ruleId\_status
    3. push\_ruleId\_inc\_id
3. push 的重试机制，N秒后，重度N次后，上面的 push\_ruleId\_pushId 、push\_ruleId\_status 会被删除

HTTP\-报名\-用例1：测试一下权重公式\(修改 rule formula 字段: \<age\> \* 20 \+ \<level\> \* 50 \)

HTTP\-报名\-用例1：请求两次，看一下匹配成功后的一些流程

```
{
  "addition": "diiiiii",
  "group_id": 2222,
  "player_list": [
    {
      "uid": 20,
      "weight_attr": {
        "level": 11,
        "age": 16
      }
    },
    {
      "uid": 20,
      "weight_attr": {
        "level": 11,
        "age": 16
      }
    }
  ],
  "rule_id": 1
}
```

1.%20HTTP%20%E6%8E%A5%E5%8F%A3%0A%20%20%20%201.%20%E6%8A%A5%E5%90%8D%0A%20%20%20%202.%20%E5%8F%96%E6%B6%88%E6%8A%A5%E5%90%8D%0A2.%20%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95%0A%20%20%20%201.%20%E6%8A%A5%E5%90%8D%0A%20%20%20%20%20%20%20%201.%20%E5%9F%BA%E7%A1%80%E5%8F%82%E6%95%B0%E6%B5%8B%E8%AF%95%0A%20%20%20%20%20%20%20%202.%20%E7%BB%84%E9%98%9F%E6%A8%A1%E5%BC%8F%0A%20%20%20%20%20%20%20%202%E3%80%82%20%E5%90%83%E9%B8%A1%E6%A8%A1%E5%BC%8F%0A3.%20rule%20%E6%B5%8B%E8%AF%95%0A%20%20%20%201.%20%E5%9F%BA%E7%A1%80%E5%8F%82%E6%95%B0%E6%B5%8B%E8%AF%95%0A%0AHTTP\-%E6%8A%A5%E5%90%8D\-%E7%94%A8%E4%BE%8B1%EF%BC%9A%E8%B5%B0%E4%B8%80%E4%B8%8B%E6%9C%80%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%B5%81%E7%A8%8B.%E6%AD%A3%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E8%AF%B7%E6%B1%82%EF%BC%8C%0A%60%60%60%0A%7B%0A%20%20%22addition%22%3A%20%22diiiiii%22%2C%0A%20%20%22group\_id%22%3A%201111%2C%0A%20%20%22player\_list%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22uid%22%3A%2010%2C%0A%20%20%20%20%20%20%22weight\_attr%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22level%22%3A%2010%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22uid%22%3A%2011%2C%0A%20%20%20%20%20%20%22weight\_attr%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22level%22%3A%2010%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%2018%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%5D%2C%0A%20%20%22rule\_id%22%3A%201%0A%7D%0A%60%60%60%0A1.%20%E6%8A%A5%E5%90%8D%E5%90%8E%EF%BC%8C%E6%A3%80%E6%9F%A5%20redis%20%E6%95%B0%E6%8D%AE%EF%BC%9A%0A%20%20%20%201.%20PlayerManager\_rid\_player%0A%20%20%20%202.%20sign\_rid\_group\_person\_1%0A%20%20%20%203.%20sign\_rid\_group\_player%0A%20%20%20%204.%20sign\_rid\_group\_weight%0A%20%20%20%205.%20sign\_rid\_group\_element\_gid%0A%20%20%20%206.%20sign\_rid\_timeout%0A%0A2.%20%E7%AD%89%E5%BE%8510%E7%A7%92%EF%BC%8C%E8%AE%A9%E6%8A%A5%E5%90%8D%E8%B6%85%E6%97%B6%EF%BC%8C%E7%9C%8B%E4%B8%80%E4%B8%8B%E8%B6%85%E6%97%B6%EF%BC%9A%0A%20%20%20%20%E4%B8%8A%E9%9D%A26%E4%B8%AA%E9%98%9F%E5%88%97%E7%9A%84%E5%80%BC%E5%9D%87%E5%BA%94%E8%AF%A5%E8%A2%AB%E5%88%A0%E9%99%A4%0A%20%20%20%20%E8%B6%85%E6%97%B6%E5%90%8E%EF%BC%8CPUSH%E4%BC%9A%E8%BF%90%E4%BD%9C%EF%BC%8C%E6%9F%A5%E7%9C%8B%20redis%20%E6%95%B0%E6%8D%AE%EF%BC%9A%0A%20%20%20%20%20%20%20%201.%20push\_ruleId\_pushId%0A%20%20%20%20%20%20%20%202.%20push\_ruleId\_status%0A%20%20%20%20%20%20%20%203.%20push\_ruleId\_inc\_id%0A3.%20push%20%E7%9A%84%E9%87%8D%E8%AF%95%E6%9C%BA%E5%88%B6%EF%BC%8CN%E7%A7%92%E5%90%8E%EF%BC%8C%E9%87%8D%E5%BA%A6N%E6%AC%A1%E5%90%8E%EF%BC%8C%E4%B8%8A%E9%9D%A2%E7%9A%84%20%20push\_ruleId\_pushId%20%E3%80%81push\_ruleId\_status%20%E4%BC%9A%E8%A2%AB%E5%88%A0%E9%99%A4%0A%0AHTTP\-%E6%8A%A5%E5%90%8D\-%E7%94%A8%E4%BE%8B1%EF%BC%9A%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E6%9D%83%E9%87%8D%E5%85%AC%E5%BC%8F\(%E4%BF%AE%E6%94%B9%20rule%20formula%20%E5%AD%97%E6%AE%B5%3A%20%20%3Cage%3E%20\*%2020%20%20%2B%20%3Clevel%3E%20\*%2050%20\)%0A%0A%0A%0AHTTP\-%E6%8A%A5%E5%90%8D\-%E7%94%A8%E4%BE%8B1%EF%BC%9A%E8%AF%B7%E6%B1%82%E4%B8%A4%E6%AC%A1%EF%BC%8C%E7%9C%8B%E4%B8%80%E4%B8%8B%E5%8C%B9%E9%85%8D%E6%88%90%E5%8A%9F%E5%90%8E%E7%9A%84%E4%B8%80%E4%BA%9B%E6%B5%81%E7%A8%8B%0A%60%60%60%0A%7B%0A%20%20%22addition%22%3A%20%22diiiiii%22%2C%0A%20%20%22group\_id%22%3A%202222%2C%0A%20%20%22player\_list%22%3A%20%5B%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22uid%22%3A%2020%2C%0A%20%20%20%20%20%20%22weight\_attr%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22level%22%3A%2011%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%2016%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%7B%0A%20%20%20%20%20%20%22uid%22%3A%2021%2C%0A%20%20%20%20%20%20%22weight\_attr%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22level%22%3A%2011%2C%0A%20%20%20%20%20%20%20%20%22age%22%3A%2016%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%5D%2C%0A%20%20%22rule\_id%22%3A%201%0A%7D%0A%60%60%60
