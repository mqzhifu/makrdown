# 游戏匹配-测试

1. HTTP 接口
    1. 报名
    2. 取消报名
2. 自动化测试
    1. 报名
        1. 基础参数测试
        2. 组队模式
            2。 吃鸡模式
3. rule 测试
    1. 基础参数测试

HTTP\-报名\-用例1：走一下最基本的流程.正常用工具请求，

```
{
  "addition": "diiiiii",
  "group_id": 1111,
  "player_list": [
    {
      "uid": 10,
      "weight_attr": {
        "level": 10,
        "age": 18
      }
    },
    {
      "uid": 11,
      "weight_attr": {
        "level": 10,
        "age": 18
      }
    }
  ],
  "rule_id": 1
}
```

1. 报名后，检查 redis 数据：
    1. PlayerManager\_rid\_player
    2. sign\_rid\_group\_person\_1
    3. sign\_rid\_group\_player
    4. sign\_rid\_group\_weight
    5. sign\_rid\_group\_element\_gid
    6. sign\_rid\_timeout
2. 等待10秒，让报名超时，看一下超时：
    上面6个队列的值均应该被删除
    超时后，PUSH会运作，查看 redis 数据：
    1. push\_ruleId\_pushId
    2. push\_ruleId\_status
    3. push\_ruleId\_inc\_id
3. push 的重试机制，N秒后，重度N次后，上面的 push\_ruleId\_pushId 、push\_ruleId\_status 会被删除

HTTP\-报名\-用例1：测试一下权重公式\(修改 rule formula 字段: \<age\> \* 20 \+ \<level\> \* 50 \)

HTTP\-报名\-用例1：请求两次，看一下匹配成功后的一些流程

```
{
  "addition": "diiiiii",
  "group_id": 2222,
  "player_list": [
    {
      "uid": 20,
      "weight_attr": {
        "level": 11,
        "age": 16
      }
    },
    {
      "uid": 20,
      "weight_attr": {
        "level": 11,
        "age": 16
      }
    }
  ],
  "rule_id": 1
}
```
