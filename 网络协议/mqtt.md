# mqtt

# mqtt 协议

|协议号|KEY        |说明                          |
|------|-----------|------------------------------|
|0     |Reserved   |保留                          |
|1     |CONNECT    |请求连接                      |
|2     |CONNACK    |请求应答                      |
|3     |PUBLISH    |发布消息                      |
|4     |PUBACK     |\(qos=1\)发布应答             |
|5     |PUBREC     |\(qos=2\)发布已接收，保证传递1|
|6     |PUBREL     |\(qos=2\)发布释放，保证传递2  |
|7     |PUBCOMP    |\(qos=2\)发布完成，保证传递3  |
|8     |SUBSCRIBE  |订阅请求                      |
|9     |SUBACK     |订阅应答                      |
|10    |UNSUBSCRIBE|取消订阅                      |
|11    |UNSUBACK   |取消订阅应答                  |
|12    |PINGREQ    |ping请求                      |
|13    |PINGRESP   |ping响应                      |
|14    |DISCONNECT |断开连接                      |
|15    |Reserved   |保留                          |

以上是，MQTT的所有协议号，代码级别可控制的是1\-14，0和15是保留

## 协议分析

一个MQTT数据包由：固定头（Fixed header）、可变头（Variable header）、消息体（payload）三部分构成

```
+----------------------------+
|      固 定 头 部 (必 需 )    |
+----------------------------+
|     可 变 头 部 (非 必 需)   |
+----------------------------+
|        载 荷 (非 必 需 )     |
+----------------------------+
```

> 固定头（Fixed header），存在于所有MQTT数据包中，表示数据包类型及数据包的分组类标识。

> 可变头（Variable header），存在于部分MQTT数据包中，数据包类型决定了可变头是否存在及其具体内容。

> 消息体（Payload），存在于部分MQTT数据包中，表示客户端收到的具体内容。

## 固定头

长度2\-5字节\(变长\)

Byte 1

报文类型\+标识

> bits 0:retain
> 
> 
> bits 1\-2:qos level
> 
> 
> bits 3:dup flag
> 
> 
> bits 4\-7：报文类型，messageType，也就是消息类型，0\-15

Byte 2

数据长度（变长头\+消息体）,remaining length

> 最多4个字节，每个字节7位是正常数，保留一位标识是否连接后面字节。

ps:单字节最大可表示的数：2^7，4个字节是2^28，最多可表示的长度为256Mb左右。也就是说消息大小，最大值肯定不会超过256M

```

+---------------------------------------------------------+
|   bit   |  7  |  6  | 5   |  4  |  3  |  2  |  1  |  0  |
+---------------------------------------------------------+
|  byte1  |      Packet type      |         Flags         |
+---------------------------------------------------------+
| byte2...|              Remaining Length                 |
+---------------------------------------------------------+

```

结合看，前2个字节必须得有，固定头至少得2个字节，至多是5个字节

## 变长头

这个比较复杂，不同的协议号，变长头都不太一样,这里就不做一一复述了，挑几个重点吧。

有些协议号是需要有packet id 、payload ，有些是不需要的。

payload

消息体，这个就不做复述了，下表：

|Control Packet|Payload |
|--------------|--------|
|CONNECT       |Required|
|CONNACK       |None    |
|PUBLISH       |Optional|
|PUBACK        |None    |
|PUBREC        |None    |
|PUBREL        |None    |
|PUBCOMP       |None    |
|SUBSCRIBE     |Required|
|SUBACK        |Required|
|UNSUBSCRIBE   |Required|
|UNSUBACK      |None    |
|PINGREQ       |None    |
|PINGRESP      |None    |
|DISCONNECT    |None    |

packet id

2字节，最大10进制数 ：65536

|Control Packet|Packet Identifier field|
|--------------|-----------------------|
|CONNECT       |NO                     |
|CONNACK       |NO                     |
|PUBLISH       |YES \(If QoS \> 0\)    |
|PUBACK        |YES                    |
|PUBREC        |YES                    |
|PUBREL        |YES                    |
|PUBCOMP       |YES                    |
|SUBSCRIBE     |YES                    |
|SUBACK        |YES                    |
|UNSUBSCRIBE   |YES                    |
|UNSUBACK      |YES                    |
|PINGREQ       |NO                     |
|PINGRESP      |NO                     |
|DISCONNECT    |NO                     |

这个ID，个人感觉意义不太大，因为：每个clientId，每次启动的时候，会都会被初始化为1，那就是A跟B的pid 是完全可能出现重复的情况

## 备忘路

https://www.cnblogs.com/dongkuo/p/11360419.html

> consumer 如果是正常非cleanSession,不管两端设置的QOS为几
> 
> 
> consumer 离线后，product发送消息，将会默认进入到messageQueue中
> 
> 
> 但是BROKER可以配置mq缓存的qos为几

mqtt%20%E5%8D%8F%E8%AE%AE%0A%3D%3D%3D%3D%3D%3D%3D%0A%0A%7C%E5%8D%8F%E8%AE%AE%E5%8F%B7%7CKEY%7C%E8%AF%B4%E6%98%8E%7C%0A%7C\-\-\-\-%7C\-\-\-\-\-%7C\-\-%7C%0A%7C0%7CReserved%7C%E4%BF%9D%E7%95%99%7C%0A%7C1%7CCONNECT%7C%E8%AF%B7%E6%B1%82%E8%BF%9E%E6%8E%A5%7C%0A%7C2%7CCONNACK%7C%E8%AF%B7%E6%B1%82%E5%BA%94%E7%AD%94%7C%0A%7C3%7CPUBLISH%7C%E5%8F%91%E5%B8%83%E6%B6%88%E6%81%AF%7C%0A%7C4%7CPUBACK%7C\(qos%3D1\)%E5%8F%91%E5%B8%83%E5%BA%94%E7%AD%94%7C%0A%7C5%7CPUBREC%7C\(qos%3D2\)%E5%8F%91%E5%B8%83%E5%B7%B2%E6%8E%A5%E6%94%B6%EF%BC%8C%E4%BF%9D%E8%AF%81%E4%BC%A0%E9%80%921%7C%0A%7C6%7CPUBREL%7C\(qos%3D2\)%E5%8F%91%E5%B8%83%E9%87%8A%E6%94%BE%EF%BC%8C%E4%BF%9D%E8%AF%81%E4%BC%A0%E9%80%922%7C%0A%7C7%7CPUBCOMP%7C\(qos%3D2\)%E5%8F%91%E5%B8%83%E5%AE%8C%E6%88%90%EF%BC%8C%E4%BF%9D%E8%AF%81%E4%BC%A0%E9%80%923%7C%0A%7C8%7CSUBSCRIBE%7C%E8%AE%A2%E9%98%85%E8%AF%B7%E6%B1%82%7C%0A%7C9%7CSUBACK%7C%E8%AE%A2%E9%98%85%E5%BA%94%E7%AD%94%7C%0A%7C10%7CUNSUBSCRIBE%7C%E5%8F%96%E6%B6%88%E8%AE%A2%E9%98%85%7C%0A%7C11%7CUNSUBACK%7C%E5%8F%96%E6%B6%88%E8%AE%A2%E9%98%85%E5%BA%94%E7%AD%94%7C%0A%7C12%7CPINGREQ%7Cping%E8%AF%B7%E6%B1%82%7C%0A%7C13%7CPINGRESP%7Cping%E5%93%8D%E5%BA%94%7C%0A%7C14%7CDISCONNECT%7C%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%7C%0A%7C15%7CReserved%7C%E4%BF%9D%E7%95%99%7C%0A%0A%E4%BB%A5%E4%B8%8A%E6%98%AF%EF%BC%8CMQTT%E7%9A%84%E6%89%80%E6%9C%89%E5%8D%8F%E8%AE%AE%E5%8F%B7%EF%BC%8C%E4%BB%A3%E7%A0%81%E7%BA%A7%E5%88%AB%E5%8F%AF%E6%8E%A7%E5%88%B6%E7%9A%84%E6%98%AF1\-14%EF%BC%8C0%E5%92%8C15%E6%98%AF%E4%BF%9D%E7%95%99%0A%0A%E5%8D%8F%E8%AE%AE%E5%88%86%E6%9E%90%0A\-\-\-\-\-\-\-\-\-\-\-\-\-\-%0A%E4%B8%80%E4%B8%AAMQTT%E6%95%B0%E6%8D%AE%E5%8C%85%E7%94%B1%EF%BC%9A%E5%9B%BA%E5%AE%9A%E5%A4%B4%EF%BC%88Fixed%20header%EF%BC%89%E3%80%81%E5%8F%AF%E5%8F%98%E5%A4%B4%EF%BC%88Variable%20header%EF%BC%89%E3%80%81%E6%B6%88%E6%81%AF%E4%BD%93%EF%BC%88payload%EF%BC%89%E4%B8%89%E9%83%A8%E5%88%86%E6%9E%84%E6%88%90%0A%0A%60%60%60%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20%20%20%20%20%20%E5%9B%BA%20%E5%AE%9A%20%E5%A4%B4%20%E9%83%A8%20\(%E5%BF%85%20%E9%9C%80%20\)%20%20%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20%20%20%20%20%E5%8F%AF%20%E5%8F%98%20%E5%A4%B4%20%E9%83%A8%20\(%E9%9D%9E%20%E5%BF%85%20%E9%9C%80\)%20%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20%20%20%20%20%20%20%20%E8%BD%BD%20%E8%8D%B7%20\(%E9%9D%9E%20%E5%BF%85%20%E9%9C%80%20\)%20%20%20%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%60%60%60%0A%3E%E5%9B%BA%E5%AE%9A%E5%A4%B4%EF%BC%88Fixed%20header%EF%BC%89%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E6%89%80%E6%9C%89MQTT%E6%95%B0%E6%8D%AE%E5%8C%85%E4%B8%AD%EF%BC%8C%E8%A1%A8%E7%A4%BA%E6%95%B0%E6%8D%AE%E5%8C%85%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%8C%85%E7%9A%84%E5%88%86%E7%BB%84%E7%B1%BB%E6%A0%87%E8%AF%86%E3%80%82%20%20%20%20%0A%0A%3E%E5%8F%AF%E5%8F%98%E5%A4%B4%EF%BC%88Variable%20header%EF%BC%89%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E9%83%A8%E5%88%86MQTT%E6%95%B0%E6%8D%AE%E5%8C%85%E4%B8%AD%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%8C%85%E7%B1%BB%E5%9E%8B%E5%86%B3%E5%AE%9A%E4%BA%86%E5%8F%AF%E5%8F%98%E5%A4%B4%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E5%8F%8A%E5%85%B6%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E3%80%82%20%20%0A%0A%3E%E6%B6%88%E6%81%AF%E4%BD%93%EF%BC%88Payload%EF%BC%89%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E9%83%A8%E5%88%86MQTT%E6%95%B0%E6%8D%AE%E5%8C%85%E4%B8%AD%EF%BC%8C%E8%A1%A8%E7%A4%BA%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%94%B6%E5%88%B0%E7%9A%84%E5%85%B7%E4%BD%93%E5%86%85%E5%AE%B9%E3%80%82%20%20%0A%0A%E5%9B%BA%E5%AE%9A%E5%A4%B4%20%20%0A\-\-\-\-%0A%E9%95%BF%E5%BA%A62\-5%E5%AD%97%E8%8A%82\(%E5%8F%98%E9%95%BF\)%0A%0AByte%201%20%20%0A%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B%2B%E6%A0%87%E8%AF%86%20%0A%3Ebits%200%3Aretain%20%20%0A%3Ebits%201\-2%3Aqos%20level%20%20%0A%3Ebits%203%3Adup%20flag%20%20%0A%3Ebits%204\-7%EF%BC%9A%E6%8A%A5%E6%96%87%E7%B1%BB%E5%9E%8B%EF%BC%8CmessageType%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%B6%88%E6%81%AF%E7%B1%BB%E5%9E%8B%EF%BC%8C0\-15%0A%0AByte%202%20%20%0A%E6%95%B0%E6%8D%AE%E9%95%BF%E5%BA%A6%EF%BC%88%E5%8F%98%E9%95%BF%E5%A4%B4%2B%E6%B6%88%E6%81%AF%E4%BD%93%EF%BC%89%2Cremaining%20length%20%20%0A%0A%3E%E6%9C%80%E5%A4%9A4%E4%B8%AA%E5%AD%97%E8%8A%82%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%AD%97%E8%8A%827%E4%BD%8D%E6%98%AF%E6%AD%A3%E5%B8%B8%E6%95%B0%EF%BC%8C%E4%BF%9D%E7%95%99%E4%B8%80%E4%BD%8D%E6%A0%87%E8%AF%86%E6%98%AF%E5%90%A6%E8%BF%9E%E6%8E%A5%E5%90%8E%E9%9D%A2%E5%AD%97%E8%8A%82%E3%80%82%0A%0Aps%3A%E5%8D%95%E5%AD%97%E8%8A%82%E6%9C%80%E5%A4%A7%E5%8F%AF%E8%A1%A8%E7%A4%BA%E7%9A%84%E6%95%B0%EF%BC%9A2%5E7%EF%BC%8C4%E4%B8%AA%E5%AD%97%E8%8A%82%E6%98%AF2%5E28%EF%BC%8C%E6%9C%80%E5%A4%9A%E5%8F%AF%E8%A1%A8%E7%A4%BA%E7%9A%84%E9%95%BF%E5%BA%A6%E4%B8%BA256Mb%E5%B7%A6%E5%8F%B3%E3%80%82%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%E6%B6%88%E6%81%AF%E5%A4%A7%E5%B0%8F%EF%BC%8C%E6%9C%80%E5%A4%A7%E5%80%BC%E8%82%AF%E5%AE%9A%E4%B8%8D%E4%BC%9A%E8%B6%85%E8%BF%87256M%0A%0A%0A%60%60%60%0A%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20%20%20bit%20%20%20%7C%20%207%20%20%7C%20%206%20%20%7C%205%20%20%20%7C%20%204%20%20%7C%20%203%20%20%7C%20%202%20%20%7C%20%201%20%20%7C%20%200%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20%20byte1%20%20%7C%20%20%20%20%20%20Packet%20type%20%20%20%20%20%20%7C%20%20%20%20%20%20%20%20%20Flags%20%20%20%20%20%20%20%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%7C%20byte2...%7C%20%20%20%20%20%20%20%20%20%20%20%20%20%20Remaining%20Length%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%2B\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%2B%0A%0A%0A%60%60%60%0A%0A%E7%BB%93%E5%90%88%E7%9C%8B%EF%BC%8C%E5%89%8D2%E4%B8%AA%E5%AD%97%E8%8A%82%E5%BF%85%E9%A1%BB%E5%BE%97%E6%9C%89%EF%BC%8C%E5%9B%BA%E5%AE%9A%E5%A4%B4%E8%87%B3%E5%B0%91%E5%BE%972%E4%B8%AA%E5%AD%97%E8%8A%82%EF%BC%8C%E8%87%B3%E5%A4%9A%E6%98%AF5%E4%B8%AA%E5%AD%97%E8%8A%82%0A%0A%0A%E5%8F%98%E9%95%BF%E5%A4%B4%0A\-\-\-\-\-\-\-\-\-\-\-\-%0A%E8%BF%99%E4%B8%AA%E6%AF%94%E8%BE%83%E5%A4%8D%E6%9D%82%EF%BC%8C%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8D%8F%E8%AE%AE%E5%8F%B7%EF%BC%8C%E5%8F%98%E9%95%BF%E5%A4%B4%E9%83%BD%E4%B8%8D%E5%A4%AA%E4%B8%80%E6%A0%B7%2C%E8%BF%99%E9%87%8C%E5%B0%B1%E4%B8%8D%E5%81%9A%E4%B8%80%E4%B8%80%E5%A4%8D%E8%BF%B0%E4%BA%86%EF%BC%8C%E6%8C%91%E5%87%A0%E4%B8%AA%E9%87%8D%E7%82%B9%E5%90%A7%E3%80%82%0A%0A%E6%9C%89%E4%BA%9B%E5%8D%8F%E8%AE%AE%E5%8F%B7%E6%98%AF%E9%9C%80%E8%A6%81%E6%9C%89packet%20id%20%E3%80%81payload%20%EF%BC%8C%E6%9C%89%E4%BA%9B%E6%98%AF%E4%B8%8D%E9%9C%80%E8%A6%81%E7%9A%84%E3%80%82%0A%0Apayload%20%20%0A%E6%B6%88%E6%81%AF%E4%BD%93%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%B0%B1%E4%B8%8D%E5%81%9A%E5%A4%8D%E8%BF%B0%E4%BA%86%EF%BC%8C%E4%B8%8B%E8%A1%A8%EF%BC%9A%0A%0A%7C%20Control%20Packet%20%7C%20Payload%20%20%7C%0A%7C\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%7C\-\-\-\-\-\-\-\-\-\-%7C%0A%7C%20CONNECT%20%20%20%20%20%20%20%20%7C%20Required%20%7C%0A%7C%20CONNACK%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PUBLISH%20%20%20%20%20%20%20%20%7C%20Optional%20%7C%0A%7C%20PUBACK%20%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PUBREC%20%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PUBREL%20%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PUBCOMP%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20SUBSCRIBE%20%20%20%20%20%20%7C%20Required%20%7C%0A%7C%20SUBACK%20%20%20%20%20%20%20%20%20%7C%20Required%20%7C%0A%7C%20UNSUBSCRIBE%20%20%20%20%7C%20Required%20%7C%0A%7C%20UNSUBACK%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PINGREQ%20%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20PINGRESP%20%20%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%7C%20DISCONNECT%20%20%20%20%20%7C%20None%20%20%20%20%20%7C%0A%0A%0A%0A%0Apacket%20id%20%20%0A2%E5%AD%97%E8%8A%82%EF%BC%8C%E6%9C%80%E5%A4%A710%E8%BF%9B%E5%88%B6%E6%95%B0%20%EF%BC%9A65536%0A%0A%7C%20Control%20Packet%20%7C%20Packet%20Identifier%20field%20%7C%0A%7C\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%7C\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%7C%0A%7C%20CONNECT%20%20%20%20%20%20%20%20%7C%20NO%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20CONNACK%20%20%20%20%20%20%20%20%7C%20NO%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PUBLISH%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20\(If%20QoS%20%3E%200\)%20%20%20%20%20%7C%0A%7C%20PUBACK%20%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PUBREC%20%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PUBREL%20%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PUBCOMP%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20SUBSCRIBE%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20SUBACK%20%20%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20UNSUBSCRIBE%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20UNSUBACK%20%20%20%20%20%20%20%7C%20YES%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PINGREQ%20%20%20%20%20%20%20%20%7C%20NO%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20PINGRESP%20%20%20%20%20%20%20%7C%20NO%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%7C%20DISCONNECT%20%20%20%20%20%7C%20NO%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7C%0A%0A%0A%E8%BF%99%E4%B8%AAID%EF%BC%8C%E4%B8%AA%E4%BA%BA%E6%84%9F%E8%A7%89%E6%84%8F%E4%B9%89%E4%B8%8D%E5%A4%AA%E5%A4%A7%EF%BC%8C%E5%9B%A0%E4%B8%BA%EF%BC%9A%E6%AF%8F%E4%B8%AAclientId%EF%BC%8C%E6%AF%8F%E6%AC%A1%E5%90%AF%E5%8A%A8%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%BC%9A%E9%83%BD%E4%BC%9A%E8%A2%AB%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%BA1%EF%BC%8C%E9%82%A3%E5%B0%B1%E6%98%AFA%E8%B7%9FB%E7%9A%84pid%20%E6%98%AF%E5%AE%8C%E5%85%A8%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E9%87%8D%E5%A4%8D%E7%9A%84%E6%83%85%E5%86%B5%20%0A%0A%0A%0A%E5%A4%87%E5%BF%98%E8%B7%AF%0A\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-%0A%0Ahttps%3A%2F%2Fwww.cnblogs.com%2Fdongkuo%2Fp%2F11360419.html%0A%0A%3Econsumer%20%E5%A6%82%E6%9E%9C%E6%98%AF%E6%AD%A3%E5%B8%B8%E9%9D%9EcleanSession%2C%E4%B8%8D%E7%AE%A1%E4%B8%A4%E7%AB%AF%E8%AE%BE%E7%BD%AE%E7%9A%84QOS%E4%B8%BA%E5%87%A0%20%20%20%0A%3Econsumer%20%E7%A6%BB%E7%BA%BF%E5%90%8E%EF%BC%8Cproduct%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF%EF%BC%8C%E5%B0%86%E4%BC%9A%E9%BB%98%E8%AE%A4%E8%BF%9B%E5%85%A5%E5%88%B0messageQueue%E4%B8%AD%20%20%0A%3E%E4%BD%86%E6%98%AFBROKER%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AEmq%E7%BC%93%E5%AD%98%E7%9A%84qos%E4%B8%BA%E5%87%A0%20%20%20%20%0A%0A%0A%0A%0A%0A
