# 进程

## 线程

线程有自己的堆栈和局部变量，没有单独的地址空间，一个线程死掉就等于整个进程死掉，所以多进程的程序要比多线程的程序健壮.

使用线程的俩个理由，1 开销较小 2 不同进程如果要通信是需要走协议的~但是同进程内的线程可执行通信

## 进程

\(进程——资源分配的最小单位，线程——程序执行的最小单位\)

进程的表现形势是一个双向循环的链表\(task\_list\)，其元素都是：tast\_struct 结构体\(process descriptor 进程描述符\)

tast\_struct:由若干的元素组成，如：一个进程打开的文件，地址空间，挂起信号进程状态等，其实内核就是根据这些元素值来做处理的。

在启动结束后，系统会启动init进程，进程初始化脚本，进程在linux中呈树状结构，init为根节点,pid=1,每一个进程都有一ID，叫PID

PID是一个从1到32768的正整数.其中1一般是特殊进程init，其它进程从2开始依次编号。当用完32768后，从2重新开始,这个值也就是系统最大进程数，小点也好，遍历一次的消耗也就少点。

## 进程状态\(task\_struct中state\)：

task\_running：正在运行或者等待运行

task\_interruptible 进程正在睡眠，等待某条件达成，内核将其置为运行状态

task\_uninterruptible:不可中断

task\_zombie 僵死，此进程已结束，但是父进程没结束

task\_zombie 停止，进程不能投入运行。如：sigstop\\sigout等。

可执行代码，从物理文件中载入到进程地址空间执行。一般程序在用户空间执行，当一个程序执行了调用系统或触发异常，它就陷入了内核空间\(内核态\)，便进入了进程上下文中了，此时current宏是有效的。通过current宏查找当前运行中的进程描述符的速度也就非常重要。

task\_struct中parent指针，还有children子进程链表

task\-\>tasks.next\(下一个进程\)

task\-\>tasks.prev\(上一个进程\)

for\_each\_process\(task\),遍历整个任务队列,不过 这个耗时。。。轻易不要做

内核在创建进程时：在创建task\_struct的同时，会为进程创建相应的堆栈。每个进程会有两个栈，一个用户栈，存在于用户空间，一个内核栈，存在于内核空间。当进程在用户空间运行时，cpu堆栈指针寄存器里面的内容是用户堆栈地址；当进程在内核空间时，cpu堆栈指针寄存器里面的内容是内核栈空间地址。

每个进程内核栈空间的最底部保存的就是：thred\_info指向tast\_list中的task\_struct

## 创建进程

采用的是copy\-on\-write,写时复制，即：新建进程时，内核并不复制整个进程空间，而是让父、子进程共享一个COPY，只有写入时才COPY。

fork,vfork,\_\_clone都是带着不同的参数去调用clone\(\),然后由clone\(\)去调用do\_fork\(\),换言之：do\_fork\(\)才是最终新建进程的原始函数。\(kernel/fork.c\)

该函数调用 ：copy\_process,其工作如下：

调用dup\_tast\_struct,为新进程创建一个内核栈、thread\_info和tast\_struct结构体

子进程着手与你进程区别，进程描述符许多成员被清0初始化。

接下来，子进程状态被置tast\_uninterruptible,以保证不会投入运行

copy\_process调用 copy\_flags,以更新task\_struct,flags成员。表明进程是否拥有超级用户权限的pf\_superpriv标志被清0.表明进程还没有调用exec函数的pf\_forknoexec标志

调用get\_pid,新进程获取PID

根据传递clone\(\)参数，copy\_process,COPY或共享打开的文件、文件系统信息、信号处理函数、进程地址空间等。在一般情况下，这些资源会被给定进程的所有线程共享。否则这些资源对每个进程是不同的。

让父进程和子进程平分剩余的时间片

最后，copy\_process作扫尾工作并返回一个指向子进程的指针。

再回到do\_fork,如果copy\_process函数成功返回，新创建进程被唤醒并让其投入运行。内核有意思选择子进程首先执行。因为一般子进程都会马上调用EXEC函数，这样可以避免写时COPY的额外开销，如果父进程首先执行的话，有可能会开始向地址空间写入。

fork的作用是复制一个与当前进程一样的进程。新进程的所有数据（变量、环境变量、程序计数器等）数值都和原进程一致，但是是一个全新的进程，并作为原进程的子进程。

从内核角度来说，没有线程概念。LINUX把所有线程都当作进程使用。只不过一个进程的所有线程共享父进程的所有地址空间资源，或者说是一种：进程间共享资源的手段

线程的创建实际上也是调用 ：clone ,只是参数不同

由于保护的缘故，一个进程不能直接访问另一个进程的资源，也就是说，进程之间互相封闭。但在一个复杂的应用系统中，通常会使用多个相关的进程来共同完成一项任务，因此要求进程之间必须能够互相通信，从而来共享资源和信息。所以，一个操作系统内核必须提供进程间的通信机制（IPC）。

内核线程和普通的进程间区别：内核线程没有独立的地址空间。它们只在内核空间运行，从来不切换到用户空间去。

C编译器，会在main函数返回点上加exit\(\)

## 进程的结束：do\_exit\(\)

将task\_struc中标志成员设置为：pf\_exiting

调用del\_timer\_sync，删除任一内核定时器。确保没有定时器在排除，也没有定时器处理程序在运行

调用\_exit\_mm,放弃进程占用的mm\_struct，如果没有别的进程使用它们\(内存共享\)，就彻底释放

调用\_exit\_files,exit\_fs,exit\_namespace,exit\_sighand,分别递减文件描述符，文件系统数据，进程名字空间和信号处理函数的引用计数。

task\_struct,exit\_code成员中的任务退出代码置为exit提供的代码中

调用do\_exit,调用schedule，切换到其它进程。因为处理task\_zombie状态，进程不会被再高度。\(kernel/exit.c\)

此时，进程不可运行\(实际上也没有地址空间让它运行\)，处理不被调用状态，它占用的所有资源就是：内核栈、thread\_info、tast\_struct，存在的唯一目的就是向它的父进程提供信息

在调用了do\_exit之后，尽管线程僵死不能运行，但系统仍保留进程描述符，当父进程结束时才会清理 task\_struck

wait4\(\)：当最终需要释放掉进程描述符时，会调用 release\_task，如下工作：

free\_uid\(\),减少该用户进程使用计数。

调用unhash\_process,从pidhash上删除该进程，同时也要从task\_list中删除该进程

接下来，如果这个进程正在被ptrace跟踪，releas\_task\(\)将跟踪进程的父进程，将其从ptract list 删除。

最后，releast调用put\_task\_struct,翻译进程内核栈和thread\_info结构所占的页，并释放task\_struck所占地slab调整缓存

如果父进程在子进程之前退出，需要给子进程找新父亲。否则这些子进程处于僵死状态，浪费内存。

do\_exit会调用nofity\_parent,再调用forget\_original\_parent来寻找新父亲，在线程组内找寻找，如果没有，就找init进程，init会调用wait4来清除这些僵死进程

## 进程调度

LINUX:抢占式多任务模式，也就是由高度程序来决定什么时候停止一个进程的运行。这个强制的挂起动作就叫 抢占。进程在被抢占之前能够运行的时间是预先设置好的，叫：进程时间片。

进程分为：IO消耗与处理器消耗。IO有阻塞，而且还有磁盘等等，非常慢。而处理器消耗更我的是执行代码，因此尽量少让这类型执行。

如果一个进程在IO等待上耗费的时间多于其运行时间，那么明显属于IO消耗型，它的优化级被动态提高。反之，如果一个进程的全部时间片一下就被耗尽，就属于 处理器消耗型，它的优点级会降低。优先级别高的进程，使用的时间片也较长。

PS查看NICE值，范围从\-20到\+19默认为0，值越大优先越低，根据NICE值分配时间片（task\_struct中static\_prio）

时间片：2ms \- 100ms\(默认\) \- 800ms，会有\-５到\+５的奖励或罚分

等待队列：简单链表

可执行队列（可执行进程），每个CPU都有一个，其元素为:runqueue（简称：rq）结构体

每个CPU的RQ队列链表中还包含俩个优先级数组：一个是活跃的，另一个过期的，它是prio\_array结构体。这样的话，所有运行队列就都有了 优先级的概念了，进程在用尽时间片后，会被重新计算时间片，然后移到过期数组，当活动数组中没有剩余进程时，这俩个数组被交换。

当所有进程的时间片 都用完时，常规的时间片算法 ：

for \(系统中的每个任务\){

重新计算优先级

重新计算时间片

}

缺点就不说了，要循环整个列队~复杂度：O\(N\)

时间片计算：

一个进程如果经常睡眠，那就是IO消耗型，如果一个进程的执行时间比睡眠时间要长，它就属于处理器消耗型

task\_struct中cleep\_avg，当一个进程从状态恢复到执行状态时，sleep增长，相反，进程运行一个时间节拍，sleep\_ave递减。除了睡眠长短，还要计算执行时间

当休眠后\(sleep\)：把自己从可执行队列移出，放入等待队列，调用schedule\(\)

新建进程后，子进程与父进程均分时间片

当一个进程IO，READ文件时候，系统就会把此进程睡眠，把自己从可执行队列移出，放入等待队列

等待队列：

declare\_waitqueue:创建一个等待项

add\_wait\_queue:把自己加入到等待队列中

flag：task\_interruptible或者task\_uninterruptible

检查条件是否为真，如果真（比如：IO结束了），就不用休眠了，如果不为真，调用schedule

当进程被唤醒时，再次检查条件是否为真，如果是，退出循环，如果不是再调用schedule

条件满足，remove\_wait\_queue，移出等待队列

## Linux调度时机主要有：

进程状态转换的时刻：进程终止、进程睡眠；

当前进程的时间片用完时（current\-\>counter=0）；

设备驱动程序主动调用schedule；

进程从中断、异常及系统调用返回到用户态时；

对称处理器：现在的服务器都是多核，每个CPU都有自己的进程链表，如果A的CPU很忙B的进程链表却是空的，就是需要负载均衡load\_balance\(\)，只要当前的可执行队列为空，它就被调用。此外被定时器调用 。在单核处理中，load\_balance不会被编译进内核。

load\_balance,需要先锁住当前执行队列

loadbalace:

find\_busiest\_queue,找到最繁忙的可执行队列\(进程数目最多\)，从此队列中选择一个优先级数组，最好是过期数组，因为那里的进程有较长时间没有运行了。如果为空，则取活动数组，然后load\_balace寻找含进程数量最少且优先级最高的

schedule 会调用context\_switch

switch\_mm:切换用户内存空间

switch\_to:切换CPU

内核需要知道什么时候调用schedule,仅靠用户程序，它们可能永远执行下去。相反，内核提供了need\_reshed表明：需要重新执行一次调度。某进程耗尽它的时间片 时，scheduler\_tick就会被标志

俩种时实的进程调度策略：sched\_fifo、sched\_rr，非实时的高度策略是sched\_normal，实时调试，没有优先权的概念，是静态优先集，优先级别最高

\#include \<stdio.h\>

\#include \<sys/types.h\> /\* 提供类型pid\_t的定义 _/

\#include \<unistd.h\> /_ 提供函数的定义 \*/

int main\(\){

pid\_t pid1;

printf\("in main function...\\n"\);

pid1 = fork\(\);

printf\("pid:%d\\n",pid1\);

}

thread\_create创建一个线程，成功返回0，否则返回Exxx（为正数）。

\* pthread\_t _tid：线程id的类型为pthread\_t，通常为无符号整型，当调用pthread\_create成功时，通过_tid指针返回。

\* const pthread\_attr\_t \*attr：指定创建线程的属性，如线程优先级、初始栈大小、是否为守护进程等。可以使用NULL来使用默认值，通常情况下我们都是使用默认值。

\* void \*\(\*func\) \(void \*\)：函数指针func，指定当新的线程创建之后，将执行的函数。

\* void \*arg：线程将执行的函数的参数。如果想传递多个参数，请将它们封装在一个结构体中。

pthread\_join用于等待某个线程退出，成功返回0，否则返回Exxx（为正数）。

\* pthread\_t tid：指定要等待的线程ID

\* void \*\* status：如果不为NULL，那么线程的返回值存储在status指向的空间中（这就是为什么status是二级指针的原因！这种才参数也称为“值\-结果”参数）。

pthread\_self用于返回当前线程的ID。

pthread\_detach用于是指定线程变为分离状态，就像进程脱离终端而变为后台进程类似。成功返回0，否则返回Exxx（为正数）。变为分离状态的线程，如果线程退出，它的所有资源将全部释放。而如果不是分离状态，线程必须保留它的线程ID，退出状态直到其它线程对它调用了pthread\_join。

pthread\_exit用于终止线程，可以指定返回值，以便其他线程通过pthread\_join函数获取该线程的返回值。

\* void \*status：指针线程终止的返回值。

int pthread\_mutex\_lock\(pthread\_mutex\_t \* mptr\);

int pthread\_mutex\_unlock\(pthread\_mutex\_t \* mptr\);

在对临界资源（全局变量）进行操作之前需要pthread\_mutex\_lock先加锁，操作完后pthread\_mutex\_unlock再解锁。

而且在这之前需要声明一个pthread\_mutex\_t类型的变量，用作前面两个函数的参数

使用互斥锁（互斥）可以使线程按顺序执行。确保一次只有一个线程执行代码的临界段来同步多个线程

线程之间的同步:必须与互斥琐配合使用

int pthread\_cond\_wait\(pthread\_cond\_t \*cptr, pthread\_mutex\_t \*mptr\);

int pthread\_cond\_signal\(pthread\_cond\_t \*cptr\);

//Both return: 0 if OK, positive Exxx value on error

pthread\_cond\_wait：用于等待某个特定的条件为真

pthread\_cond\_signal用于通知阻塞的线程某个特定的条件为真了

在调用者两个函数之前需要声明一个pthread\_cond\_t类型的变量，用于这两个函数的参数。

编译参数：gcc \-lpthread

\#include\<stdio.h\>

\#include\<stdlib.h\>

\#include\<pthread.h\>

\#include\<errno.h\>

\#include\<unistd.h\>

%E7%BA%BF%E7%A8%8B%0A\-\-\-\-\-\-%0A%0A%E7%BA%BF%E7%A8%8B%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E5%A0%86%E6%A0%88%E5%92%8C%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%8D%95%E7%8B%AC%E7%9A%84%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%EF%BC%8C%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E6%AD%BB%E6%8E%89%E5%B0%B1%E7%AD%89%E4%BA%8E%E6%95%B4%E4%B8%AA%E8%BF%9B%E7%A8%8B%E6%AD%BB%E6%8E%89%EF%BC%8C%E6%89%80%E4%BB%A5%E5%A4%9A%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%A6%81%E6%AF%94%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%A8%8B%E5%BA%8F%E5%81%A5%E5%A3%AE.%0A%0A%E4%BD%BF%E7%94%A8%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BF%A9%E4%B8%AA%E7%90%86%E7%94%B1%EF%BC%8C1%20%E5%BC%80%E9%94%80%E8%BE%83%E5%B0%8F%202%20%E4%B8%8D%E5%90%8C%E8%BF%9B%E7%A8%8B%E5%A6%82%E6%9E%9C%E8%A6%81%E9%80%9A%E4%BF%A1%E6%98%AF%E9%9C%80%E8%A6%81%E8%B5%B0%E5%8D%8F%E8%AE%AE%E7%9A%84~%E4%BD%86%E6%98%AF%E5%90%8C%E8%BF%9B%E7%A8%8B%E5%86%85%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%80%9A%E4%BF%A1%0A%0A%E8%BF%9B%E7%A8%8B%0A\-\-\-\-\-\-%0A\(%E8%BF%9B%E7%A8%8B%E2%80%94%E2%80%94%E8%B5%84%E6%BA%90%E5%88%86%E9%85%8D%E7%9A%84%E6%9C%80%E5%B0%8F%E5%8D%95%E4%BD%8D%EF%BC%8C%E7%BA%BF%E7%A8%8B%E2%80%94%E2%80%94%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E7%9A%84%E6%9C%80%E5%B0%8F%E5%8D%95%E4%BD%8D\)%0A%0A%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%A1%A8%E7%8E%B0%E5%BD%A2%E5%8A%BF%E6%98%AF%E4%B8%80%E4%B8%AA%E5%8F%8C%E5%90%91%E5%BE%AA%E7%8E%AF%E7%9A%84%E9%93%BE%E8%A1%A8\(task\_list\)%EF%BC%8C%E5%85%B6%E5%85%83%E7%B4%A0%E9%83%BD%E6%98%AF%EF%BC%9Atast\_struct%20%E7%BB%93%E6%9E%84%E4%BD%93\(process%20descriptor%20%E8%BF%9B%E7%A8%8B%E6%8F%8F%E8%BF%B0%E7%AC%A6\)%0Atast\_struct%3A%E7%94%B1%E8%8B%A5%E5%B9%B2%E7%9A%84%E5%85%83%E7%B4%A0%E7%BB%84%E6%88%90%EF%BC%8C%E5%A6%82%EF%BC%9A%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E6%89%93%E5%BC%80%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%EF%BC%8C%E6%8C%82%E8%B5%B7%E4%BF%A1%E5%8F%B7%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E7%AD%89%EF%BC%8C%E5%85%B6%E5%AE%9E%E5%86%85%E6%A0%B8%E5%B0%B1%E6%98%AF%E6%A0%B9%E6%8D%AE%E8%BF%99%E4%BA%9B%E5%85%83%E7%B4%A0%E5%80%BC%E6%9D%A5%E5%81%9A%E5%A4%84%E7%90%86%E7%9A%84%E3%80%82%0A%0A%E5%9C%A8%E5%90%AF%E5%8A%A8%E7%BB%93%E6%9D%9F%E5%90%8E%EF%BC%8C%E7%B3%BB%E7%BB%9F%E4%BC%9A%E5%90%AF%E5%8A%A8init%E8%BF%9B%E7%A8%8B%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%9C%AC%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%9C%A8linux%E4%B8%AD%E5%91%88%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84%EF%BC%8Cinit%E4%B8%BA%E6%A0%B9%E8%8A%82%E7%82%B9%2Cpid%3D1%2C%E6%AF%8F%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E9%83%BD%E6%9C%89%E4%B8%80ID%EF%BC%8C%E5%8F%ABPID%0APID%E6%98%AF%E4%B8%80%E4%B8%AA%E4%BB%8E1%E5%88%B032768%E7%9A%84%E6%AD%A3%E6%95%B4%E6%95%B0.%E5%85%B6%E4%B8%AD1%E4%B8%80%E8%88%AC%E6%98%AF%E7%89%B9%E6%AE%8A%E8%BF%9B%E7%A8%8Binit%EF%BC%8C%E5%85%B6%E5%AE%83%E8%BF%9B%E7%A8%8B%E4%BB%8E2%E5%BC%80%E5%A7%8B%E4%BE%9D%E6%AC%A1%E7%BC%96%E5%8F%B7%E3%80%82%E5%BD%93%E7%94%A8%E5%AE%8C32768%E5%90%8E%EF%BC%8C%E4%BB%8E2%E9%87%8D%E6%96%B0%E5%BC%80%E5%A7%8B%2C%E8%BF%99%E4%B8%AA%E5%80%BC%E4%B9%9F%E5%B0%B1%E6%98%AF%E7%B3%BB%E7%BB%9F%E6%9C%80%E5%A4%A7%E8%BF%9B%E7%A8%8B%E6%95%B0%EF%BC%8C%E5%B0%8F%E7%82%B9%E4%B9%9F%E5%A5%BD%EF%BC%8C%E9%81%8D%E5%8E%86%E4%B8%80%E6%AC%A1%E7%9A%84%E6%B6%88%E8%80%97%E4%B9%9F%E5%B0%B1%E5%B0%91%E7%82%B9%E3%80%82%0A%0A%0A%0A%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81\(task\_struct%E4%B8%ADstate\)%EF%BC%9A%0A\-\-\-\-\-\-%0Atask\_running%EF%BC%9A%E6%AD%A3%E5%9C%A8%E8%BF%90%E8%A1%8C%E6%88%96%E8%80%85%E7%AD%89%E5%BE%85%E8%BF%90%E8%A1%8C%0Atask\_interruptible%20%E8%BF%9B%E7%A8%8B%E6%AD%A3%E5%9C%A8%E7%9D%A1%E7%9C%A0%EF%BC%8C%E7%AD%89%E5%BE%85%E6%9F%90%E6%9D%A1%E4%BB%B6%E8%BE%BE%E6%88%90%EF%BC%8C%E5%86%85%E6%A0%B8%E5%B0%86%E5%85%B6%E7%BD%AE%E4%B8%BA%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81%0Atask\_uninterruptible%3A%E4%B8%8D%E5%8F%AF%E4%B8%AD%E6%96%AD%0Atask\_zombie%20%E5%83%B5%E6%AD%BB%EF%BC%8C%E6%AD%A4%E8%BF%9B%E7%A8%8B%E5%B7%B2%E7%BB%93%E6%9D%9F%EF%BC%8C%E4%BD%86%E6%98%AF%E7%88%B6%E8%BF%9B%E7%A8%8B%E6%B2%A1%E7%BB%93%E6%9D%9F%0Atask\_zombie%20%E5%81%9C%E6%AD%A2%EF%BC%8C%E8%BF%9B%E7%A8%8B%E4%B8%8D%E8%83%BD%E6%8A%95%E5%85%A5%E8%BF%90%E8%A1%8C%E3%80%82%E5%A6%82%EF%BC%9Asigstop%5Csigout%E7%AD%89%E3%80%82%0A%0A%0A%E5%8F%AF%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%8C%E4%BB%8E%E7%89%A9%E7%90%86%E6%96%87%E4%BB%B6%E4%B8%AD%E8%BD%BD%E5%85%A5%E5%88%B0%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E6%89%A7%E8%A1%8C%E3%80%82%E4%B8%80%E8%88%AC%E7%A8%8B%E5%BA%8F%E5%9C%A8%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%BD%93%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E4%BA%86%E8%B0%83%E7%94%A8%E7%B3%BB%E7%BB%9F%E6%88%96%E8%A7%A6%E5%8F%91%E5%BC%82%E5%B8%B8%EF%BC%8C%E5%AE%83%E5%B0%B1%E9%99%B7%E5%85%A5%E4%BA%86%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4\(%E5%86%85%E6%A0%B8%E6%80%81\)%EF%BC%8C%E4%BE%BF%E8%BF%9B%E5%85%A5%E4%BA%86%E8%BF%9B%E7%A8%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E4%B8%AD%E4%BA%86%EF%BC%8C%E6%AD%A4%E6%97%B6current%E5%AE%8F%E6%98%AF%E6%9C%89%E6%95%88%E7%9A%84%E3%80%82%E9%80%9A%E8%BF%87current%E5%AE%8F%E6%9F%A5%E6%89%BE%E5%BD%93%E5%89%8D%E8%BF%90%E8%A1%8C%E4%B8%AD%E7%9A%84%E8%BF%9B%E7%A8%8B%E6%8F%8F%E8%BF%B0%E7%AC%A6%E7%9A%84%E9%80%9F%E5%BA%A6%E4%B9%9F%E5%B0%B1%E9%9D%9E%E5%B8%B8%E9%87%8D%E8%A6%81%E3%80%82%0A%0A%0A%0Atask\_struct%E4%B8%ADparent%E6%8C%87%E9%92%88%EF%BC%8C%E8%BF%98%E6%9C%89children%E5%AD%90%E8%BF%9B%E7%A8%8B%E9%93%BE%E8%A1%A8%0Atask\-%3Etasks.next\(%E4%B8%8B%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B\)%0Atask\-%3Etasks.prev\(%E4%B8%8A%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B\)%0Afor\_each\_process\(task\)%2C%E9%81%8D%E5%8E%86%E6%95%B4%E4%B8%AA%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%2C%E4%B8%8D%E8%BF%87%20%E8%BF%99%E4%B8%AA%E8%80%97%E6%97%B6%E3%80%82%E3%80%82%E3%80%82%E8%BD%BB%E6%98%93%E4%B8%8D%E8%A6%81%E5%81%9A%0A%0A%E5%86%85%E6%A0%B8%E5%9C%A8%E5%88%9B%E5%BB%BA%E8%BF%9B%E7%A8%8B%E6%97%B6%EF%BC%9A%E5%9C%A8%E5%88%9B%E5%BB%BAtask\_struct%E7%9A%84%E5%90%8C%E6%97%B6%EF%BC%8C%E4%BC%9A%E4%B8%BA%E8%BF%9B%E7%A8%8B%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E5%A0%86%E6%A0%88%E3%80%82%E6%AF%8F%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%BC%9A%E6%9C%89%E4%B8%A4%E4%B8%AA%E6%A0%88%EF%BC%8C%E4%B8%80%E4%B8%AA%E7%94%A8%E6%88%B7%E6%A0%88%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%86%85%E6%A0%B8%E6%A0%88%EF%BC%8C%E5%AD%98%E5%9C%A8%E4%BA%8E%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E3%80%82%E5%BD%93%E8%BF%9B%E7%A8%8B%E5%9C%A8%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E8%BF%90%E8%A1%8C%E6%97%B6%EF%BC%8Ccpu%E5%A0%86%E6%A0%88%E6%8C%87%E9%92%88%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8C%E9%9D%A2%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E7%94%A8%E6%88%B7%E5%A0%86%E6%A0%88%E5%9C%B0%E5%9D%80%EF%BC%9B%E5%BD%93%E8%BF%9B%E7%A8%8B%E5%9C%A8%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E6%97%B6%EF%BC%8Ccpu%E5%A0%86%E6%A0%88%E6%8C%87%E9%92%88%E5%AF%84%E5%AD%98%E5%99%A8%E9%87%8C%E9%9D%A2%E7%9A%84%E5%86%85%E5%AE%B9%E6%98%AF%E5%86%85%E6%A0%B8%E6%A0%88%E7%A9%BA%E9%97%B4%E5%9C%B0%E5%9D%80%E3%80%82%0A%0A%E6%AF%8F%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%86%85%E6%A0%B8%E6%A0%88%E7%A9%BA%E9%97%B4%E7%9A%84%E6%9C%80%E5%BA%95%E9%83%A8%E4%BF%9D%E5%AD%98%E7%9A%84%E5%B0%B1%E6%98%AF%EF%BC%9Athred\_info%E6%8C%87%E5%90%91tast\_list%E4%B8%AD%E7%9A%84task\_struct%0A%0A%E5%88%9B%E5%BB%BA%E8%BF%9B%E7%A8%8B%0A\-\-\-\-\-\-%0A%E9%87%87%E7%94%A8%E7%9A%84%E6%98%AFcopy\-on\-write%2C%E5%86%99%E6%97%B6%E5%A4%8D%E5%88%B6%EF%BC%8C%E5%8D%B3%EF%BC%9A%E6%96%B0%E5%BB%BA%E8%BF%9B%E7%A8%8B%E6%97%B6%EF%BC%8C%E5%86%85%E6%A0%B8%E5%B9%B6%E4%B8%8D%E5%A4%8D%E5%88%B6%E6%95%B4%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4%EF%BC%8C%E8%80%8C%E6%98%AF%E8%AE%A9%E7%88%B6%E3%80%81%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%85%B1%E4%BA%AB%E4%B8%80%E4%B8%AACOPY%EF%BC%8C%E5%8F%AA%E6%9C%89%E5%86%99%E5%85%A5%E6%97%B6%E6%89%8DCOPY%E3%80%82%0A%0Afork%2Cvfork%2C\_\_clone%E9%83%BD%E6%98%AF%E5%B8%A6%E7%9D%80%E4%B8%8D%E5%90%8C%E7%9A%84%E5%8F%82%E6%95%B0%E5%8E%BB%E8%B0%83%E7%94%A8clone\(\)%2C%E7%84%B6%E5%90%8E%E7%94%B1clone\(\)%E5%8E%BB%E8%B0%83%E7%94%A8do\_fork\(\)%2C%E6%8D%A2%E8%A8%80%E4%B9%8B%EF%BC%9Ado\_fork\(\)%E6%89%8D%E6%98%AF%E6%9C%80%E7%BB%88%E6%96%B0%E5%BB%BA%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%8E%9F%E5%A7%8B%E5%87%BD%E6%95%B0%E3%80%82\(kernel%2Ffork.c\)%0A%0A%E8%AF%A5%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%20%EF%BC%9Acopy\_process%2C%E5%85%B6%E5%B7%A5%E4%BD%9C%E5%A6%82%E4%B8%8B%EF%BC%9A%0A%E8%B0%83%E7%94%A8dup\_tast\_struct%2C%E4%B8%BA%E6%96%B0%E8%BF%9B%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%86%85%E6%A0%B8%E6%A0%88%E3%80%81thread\_info%E5%92%8Ctast\_struct%E7%BB%93%E6%9E%84%E4%BD%93%0A%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%9D%80%E6%89%8B%E4%B8%8E%E4%BD%A0%E8%BF%9B%E7%A8%8B%E5%8C%BA%E5%88%AB%EF%BC%8C%E8%BF%9B%E7%A8%8B%E6%8F%8F%E8%BF%B0%E7%AC%A6%E8%AE%B8%E5%A4%9A%E6%88%90%E5%91%98%E8%A2%AB%E6%B8%850%E5%88%9D%E5%A7%8B%E5%8C%96%E3%80%82%0A%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%A2%AB%E7%BD%AEtast\_uninterruptible%2C%E4%BB%A5%E4%BF%9D%E8%AF%81%E4%B8%8D%E4%BC%9A%E6%8A%95%E5%85%A5%E8%BF%90%E8%A1%8C%0Acopy\_process%E8%B0%83%E7%94%A8%20copy\_flags%2C%E4%BB%A5%E6%9B%B4%E6%96%B0task\_struct%2Cflags%E6%88%90%E5%91%98%E3%80%82%E8%A1%A8%E6%98%8E%E8%BF%9B%E7%A8%8B%E6%98%AF%E5%90%A6%E6%8B%A5%E6%9C%89%E8%B6%85%E7%BA%A7%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E7%9A%84pf\_superpriv%E6%A0%87%E5%BF%97%E8%A2%AB%E6%B8%850.%E8%A1%A8%E6%98%8E%E8%BF%9B%E7%A8%8B%E8%BF%98%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8exec%E5%87%BD%E6%95%B0%E7%9A%84pf\_forknoexec%E6%A0%87%E5%BF%97%0A%E8%B0%83%E7%94%A8get\_pid%2C%E6%96%B0%E8%BF%9B%E7%A8%8B%E8%8E%B7%E5%8F%96PID%0A%E6%A0%B9%E6%8D%AE%E4%BC%A0%E9%80%92clone\(\)%E5%8F%82%E6%95%B0%EF%BC%8Ccopy\_process%2CCOPY%E6%88%96%E5%85%B1%E4%BA%AB%E6%89%93%E5%BC%80%E7%9A%84%E6%96%87%E4%BB%B6%E3%80%81%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E3%80%81%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E3%80%81%E8%BF%9B%E7%A8%8B%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E7%AD%89%E3%80%82%E5%9C%A8%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E8%BF%99%E4%BA%9B%E8%B5%84%E6%BA%90%E4%BC%9A%E8%A2%AB%E7%BB%99%E5%AE%9A%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E5%85%B1%E4%BA%AB%E3%80%82%E5%90%A6%E5%88%99%E8%BF%99%E4%BA%9B%E8%B5%84%E6%BA%90%E5%AF%B9%E6%AF%8F%E4%B8%AA%E8%BF%9B%E7%A8%8B%E6%98%AF%E4%B8%8D%E5%90%8C%E7%9A%84%E3%80%82%0A%E8%AE%A9%E7%88%B6%E8%BF%9B%E7%A8%8B%E5%92%8C%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%B9%B3%E5%88%86%E5%89%A9%E4%BD%99%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%20%0A%E6%9C%80%E5%90%8E%EF%BC%8Ccopy\_process%E4%BD%9C%E6%89%AB%E5%B0%BE%E5%B7%A5%E4%BD%9C%E5%B9%B6%E8%BF%94%E5%9B%9E%E4%B8%80%E4%B8%AA%E6%8C%87%E5%90%91%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%8C%87%E9%92%88%E3%80%82%0A%0A%E5%86%8D%E5%9B%9E%E5%88%B0do\_fork%2C%E5%A6%82%E6%9E%9Ccopy\_process%E5%87%BD%E6%95%B0%E6%88%90%E5%8A%9F%E8%BF%94%E5%9B%9E%EF%BC%8C%E6%96%B0%E5%88%9B%E5%BB%BA%E8%BF%9B%E7%A8%8B%E8%A2%AB%E5%94%A4%E9%86%92%E5%B9%B6%E8%AE%A9%E5%85%B6%E6%8A%95%E5%85%A5%E8%BF%90%E8%A1%8C%E3%80%82%E5%86%85%E6%A0%B8%E6%9C%89%E6%84%8F%E6%80%9D%E9%80%89%E6%8B%A9%E5%AD%90%E8%BF%9B%E7%A8%8B%E9%A6%96%E5%85%88%E6%89%A7%E8%A1%8C%E3%80%82%E5%9B%A0%E4%B8%BA%E4%B8%80%E8%88%AC%E5%AD%90%E8%BF%9B%E7%A8%8B%E9%83%BD%E4%BC%9A%E9%A9%AC%E4%B8%8A%E8%B0%83%E7%94%A8EXEC%E5%87%BD%E6%95%B0%EF%BC%8C%E8%BF%99%E6%A0%B7%E5%8F%AF%E4%BB%A5%E9%81%BF%E5%85%8D%E5%86%99%E6%97%B6COPY%E7%9A%84%E9%A2%9D%E5%A4%96%E5%BC%80%E9%94%80%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%88%B6%E8%BF%9B%E7%A8%8B%E9%A6%96%E5%85%88%E6%89%A7%E8%A1%8C%E7%9A%84%E8%AF%9D%EF%BC%8C%E6%9C%89%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%BC%80%E5%A7%8B%E5%90%91%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E5%86%99%E5%85%A5%E3%80%82%0A%0A%0A%0Afork%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E5%A4%8D%E5%88%B6%E4%B8%80%E4%B8%AA%E4%B8%8E%E5%BD%93%E5%89%8D%E8%BF%9B%E7%A8%8B%E4%B8%80%E6%A0%B7%E7%9A%84%E8%BF%9B%E7%A8%8B%E3%80%82%E6%96%B0%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%EF%BC%88%E5%8F%98%E9%87%8F%E3%80%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E3%80%81%E7%A8%8B%E5%BA%8F%E8%AE%A1%E6%95%B0%E5%99%A8%E7%AD%89%EF%BC%89%E6%95%B0%E5%80%BC%E9%83%BD%E5%92%8C%E5%8E%9F%E8%BF%9B%E7%A8%8B%E4%B8%80%E8%87%B4%EF%BC%8C%E4%BD%86%E6%98%AF%E6%98%AF%E4%B8%80%E4%B8%AA%E5%85%A8%E6%96%B0%E7%9A%84%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%B9%B6%E4%BD%9C%E4%B8%BA%E5%8E%9F%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%AD%90%E8%BF%9B%E7%A8%8B%E3%80%82%0A%0A%E4%BB%8E%E5%86%85%E6%A0%B8%E8%A7%92%E5%BA%A6%E6%9D%A5%E8%AF%B4%EF%BC%8C%E6%B2%A1%E6%9C%89%E7%BA%BF%E7%A8%8B%E6%A6%82%E5%BF%B5%E3%80%82LINUX%E6%8A%8A%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E9%83%BD%E5%BD%93%E4%BD%9C%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E3%80%82%E5%8F%AA%E4%B8%8D%E8%BF%87%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%80%E6%9C%89%E7%BA%BF%E7%A8%8B%E5%85%B1%E4%BA%AB%E7%88%B6%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%80%E6%9C%89%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E8%B5%84%E6%BA%90%EF%BC%8C%E6%88%96%E8%80%85%E8%AF%B4%E6%98%AF%E4%B8%80%E7%A7%8D%EF%BC%9A%E8%BF%9B%E7%A8%8B%E9%97%B4%E5%85%B1%E4%BA%AB%E8%B5%84%E6%BA%90%E7%9A%84%E6%89%8B%E6%AE%B5%0A%0A%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%88%9B%E5%BB%BA%E5%AE%9E%E9%99%85%E4%B8%8A%E4%B9%9F%E6%98%AF%E8%B0%83%E7%94%A8%20%EF%BC%9Aclone%20%2C%E5%8F%AA%E6%98%AF%E5%8F%82%E6%95%B0%E4%B8%8D%E5%90%8C%0A%0A%E7%94%B1%E4%BA%8E%E4%BF%9D%E6%8A%A4%E7%9A%84%E7%BC%98%E6%95%85%EF%BC%8C%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%AE%BF%E9%97%AE%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E8%AF%B4%EF%BC%8C%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E4%BA%92%E7%9B%B8%E5%B0%81%E9%97%AD%E3%80%82%E4%BD%86%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E7%9A%84%E5%BA%94%E7%94%A8%E7%B3%BB%E7%BB%9F%E4%B8%AD%EF%BC%8C%E9%80%9A%E5%B8%B8%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%A4%9A%E4%B8%AA%E7%9B%B8%E5%85%B3%E7%9A%84%E8%BF%9B%E7%A8%8B%E6%9D%A5%E5%85%B1%E5%90%8C%E5%AE%8C%E6%88%90%E4%B8%80%E9%A1%B9%E4%BB%BB%E5%8A%A1%EF%BC%8C%E5%9B%A0%E6%AD%A4%E8%A6%81%E6%B1%82%E8%BF%9B%E7%A8%8B%E4%B9%8B%E9%97%B4%E5%BF%85%E9%A1%BB%E8%83%BD%E5%A4%9F%E4%BA%92%E7%9B%B8%E9%80%9A%E4%BF%A1%EF%BC%8C%E4%BB%8E%E8%80%8C%E6%9D%A5%E5%85%B1%E4%BA%AB%E8%B5%84%E6%BA%90%E5%92%8C%E4%BF%A1%E6%81%AF%E3%80%82%E6%89%80%E4%BB%A5%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%86%85%E6%A0%B8%E5%BF%85%E9%A1%BB%E6%8F%90%E4%BE%9B%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6%EF%BC%88IPC%EF%BC%89%E3%80%82%0A%0A%0A%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E5%92%8C%E6%99%AE%E9%80%9A%E7%9A%84%E8%BF%9B%E7%A8%8B%E9%97%B4%E5%8C%BA%E5%88%AB%EF%BC%9A%E5%86%85%E6%A0%B8%E7%BA%BF%E7%A8%8B%E6%B2%A1%E6%9C%89%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E3%80%82%E5%AE%83%E4%BB%AC%E5%8F%AA%E5%9C%A8%E5%86%85%E6%A0%B8%E7%A9%BA%E9%97%B4%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%BB%8E%E6%9D%A5%E4%B8%8D%E5%88%87%E6%8D%A2%E5%88%B0%E7%94%A8%E6%88%B7%E7%A9%BA%E9%97%B4%E5%8E%BB%E3%80%82%0A%0AC%E7%BC%96%E8%AF%91%E5%99%A8%EF%BC%8C%E4%BC%9A%E5%9C%A8main%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E7%82%B9%E4%B8%8A%E5%8A%A0exit\(\)%0A%0A%0A%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%BB%93%E6%9D%9F%EF%BC%9Ado\_exit\(\)%0A\-\-\-\-\-\-\-%0A%E5%B0%86task\_struc%E4%B8%AD%E6%A0%87%E5%BF%97%E6%88%90%E5%91%98%E8%AE%BE%E7%BD%AE%E4%B8%BA%EF%BC%9Apf\_exiting%0A%E8%B0%83%E7%94%A8del\_timer\_sync%EF%BC%8C%E5%88%A0%E9%99%A4%E4%BB%BB%E4%B8%80%E5%86%85%E6%A0%B8%E5%AE%9A%E6%97%B6%E5%99%A8%E3%80%82%E7%A1%AE%E4%BF%9D%E6%B2%A1%E6%9C%89%E5%AE%9A%E6%97%B6%E5%99%A8%E5%9C%A8%E6%8E%92%E9%99%A4%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%9C%89%E5%AE%9A%E6%97%B6%E5%99%A8%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F%E5%9C%A8%E8%BF%90%E8%A1%8C%0A%E8%B0%83%E7%94%A8\_exit\_mm%2C%E6%94%BE%E5%BC%83%E8%BF%9B%E7%A8%8B%E5%8D%A0%E7%94%A8%E7%9A%84mm\_struct%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E5%88%AB%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E5%AE%83%E4%BB%AC\(%E5%86%85%E5%AD%98%E5%85%B1%E4%BA%AB\)%EF%BC%8C%E5%B0%B1%E5%BD%BB%E5%BA%95%E9%87%8A%E6%94%BE%20%0A%E8%B0%83%E7%94%A8\_exit\_files%2Cexit\_fs%2Cexit\_namespace%2Cexit\_sighand%2C%E5%88%86%E5%88%AB%E9%80%92%E5%87%8F%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%EF%BC%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4%E5%92%8C%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0%E3%80%82%0Atask\_struct%2Cexit\_code%E6%88%90%E5%91%98%E4%B8%AD%E7%9A%84%E4%BB%BB%E5%8A%A1%E9%80%80%E5%87%BA%E4%BB%A3%E7%A0%81%E7%BD%AE%E4%B8%BAexit%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BB%A3%E7%A0%81%E4%B8%AD%0A%E8%B0%83%E7%94%A8do\_exit%2C%E8%B0%83%E7%94%A8schedule%EF%BC%8C%E5%88%87%E6%8D%A2%E5%88%B0%E5%85%B6%E5%AE%83%E8%BF%9B%E7%A8%8B%E3%80%82%E5%9B%A0%E4%B8%BA%E5%A4%84%E7%90%86task\_zombie%E7%8A%B6%E6%80%81%EF%BC%8C%E8%BF%9B%E7%A8%8B%E4%B8%8D%E4%BC%9A%E8%A2%AB%E5%86%8D%E9%AB%98%E5%BA%A6%E3%80%82\(kernel%2Fexit.c\)%0A%0A%E6%AD%A4%E6%97%B6%EF%BC%8C%E8%BF%9B%E7%A8%8B%E4%B8%8D%E5%8F%AF%E8%BF%90%E8%A1%8C\(%E5%AE%9E%E9%99%85%E4%B8%8A%E4%B9%9F%E6%B2%A1%E6%9C%89%E5%9C%B0%E5%9D%80%E7%A9%BA%E9%97%B4%E8%AE%A9%E5%AE%83%E8%BF%90%E8%A1%8C\)%EF%BC%8C%E5%A4%84%E7%90%86%E4%B8%8D%E8%A2%AB%E8%B0%83%E7%94%A8%E7%8A%B6%E6%80%81%EF%BC%8C%E5%AE%83%E5%8D%A0%E7%94%A8%E7%9A%84%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90%E5%B0%B1%E6%98%AF%EF%BC%9A%E5%86%85%E6%A0%B8%E6%A0%88%E3%80%81thread\_info%E3%80%81tast\_struct%EF%BC%8C%E5%AD%98%E5%9C%A8%E7%9A%84%E5%94%AF%E4%B8%80%E7%9B%AE%E7%9A%84%E5%B0%B1%E6%98%AF%E5%90%91%E5%AE%83%E7%9A%84%E7%88%B6%E8%BF%9B%E7%A8%8B%E6%8F%90%E4%BE%9B%E4%BF%A1%E6%81%AF%0A%0A%0A%E5%9C%A8%E8%B0%83%E7%94%A8%E4%BA%86do\_exit%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%B0%BD%E7%AE%A1%E7%BA%BF%E7%A8%8B%E5%83%B5%E6%AD%BB%E4%B8%8D%E8%83%BD%E8%BF%90%E8%A1%8C%EF%BC%8C%E4%BD%86%E7%B3%BB%E7%BB%9F%E4%BB%8D%E4%BF%9D%E7%95%99%E8%BF%9B%E7%A8%8B%E6%8F%8F%E8%BF%B0%E7%AC%A6%EF%BC%8C%E5%BD%93%E7%88%B6%E8%BF%9B%E7%A8%8B%E7%BB%93%E6%9D%9F%E6%97%B6%E6%89%8D%E4%BC%9A%E6%B8%85%E7%90%86%20task\_struck%0A%0Await4\(\)%EF%BC%9A%E5%BD%93%E6%9C%80%E7%BB%88%E9%9C%80%E8%A6%81%E9%87%8A%E6%94%BE%E6%8E%89%E8%BF%9B%E7%A8%8B%E6%8F%8F%E8%BF%B0%E7%AC%A6%E6%97%B6%EF%BC%8C%E4%BC%9A%E8%B0%83%E7%94%A8%20release\_task%EF%BC%8C%E5%A6%82%E4%B8%8B%E5%B7%A5%E4%BD%9C%EF%BC%9A%0Afree\_uid\(\)%2C%E5%87%8F%E5%B0%91%E8%AF%A5%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E4%BD%BF%E7%94%A8%E8%AE%A1%E6%95%B0%E3%80%82%0A%E8%B0%83%E7%94%A8unhash\_process%2C%E4%BB%8Epidhash%E4%B8%8A%E5%88%A0%E9%99%A4%E8%AF%A5%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E8%A6%81%E4%BB%8Etask\_list%E4%B8%AD%E5%88%A0%E9%99%A4%E8%AF%A5%E8%BF%9B%E7%A8%8B%0A%E6%8E%A5%E4%B8%8B%E6%9D%A5%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%AA%E8%BF%9B%E7%A8%8B%E6%AD%A3%E5%9C%A8%E8%A2%ABptrace%E8%B7%9F%E8%B8%AA%EF%BC%8Creleas\_task\(\)%E5%B0%86%E8%B7%9F%E8%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%88%B6%E8%BF%9B%E7%A8%8B%EF%BC%8C%E5%B0%86%E5%85%B6%E4%BB%8Eptract%20list%20%E5%88%A0%E9%99%A4%E3%80%82%0A%E6%9C%80%E5%90%8E%EF%BC%8Creleast%E8%B0%83%E7%94%A8put\_task\_struct%2C%E7%BF%BB%E8%AF%91%E8%BF%9B%E7%A8%8B%E5%86%85%E6%A0%B8%E6%A0%88%E5%92%8Cthread\_info%E7%BB%93%E6%9E%84%E6%89%80%E5%8D%A0%E7%9A%84%E9%A1%B5%EF%BC%8C%E5%B9%B6%E9%87%8A%E6%94%BEtask\_struck%E6%89%80%E5%8D%A0%E5%9C%B0slab%E8%B0%83%E6%95%B4%E7%BC%93%E5%AD%98%0A%0A%E5%A6%82%E6%9E%9C%E7%88%B6%E8%BF%9B%E7%A8%8B%E5%9C%A8%E5%AD%90%E8%BF%9B%E7%A8%8B%E4%B9%8B%E5%89%8D%E9%80%80%E5%87%BA%EF%BC%8C%E9%9C%80%E8%A6%81%E7%BB%99%E5%AD%90%E8%BF%9B%E7%A8%8B%E6%89%BE%E6%96%B0%E7%88%B6%E4%BA%B2%E3%80%82%E5%90%A6%E5%88%99%E8%BF%99%E4%BA%9B%E5%AD%90%E8%BF%9B%E7%A8%8B%E5%A4%84%E4%BA%8E%E5%83%B5%E6%AD%BB%E7%8A%B6%E6%80%81%EF%BC%8C%E6%B5%AA%E8%B4%B9%E5%86%85%E5%AD%98%E3%80%82%0Ado\_exit%E4%BC%9A%E8%B0%83%E7%94%A8nofity\_parent%2C%E5%86%8D%E8%B0%83%E7%94%A8forget\_original\_parent%E6%9D%A5%E5%AF%BB%E6%89%BE%E6%96%B0%E7%88%B6%E4%BA%B2%EF%BC%8C%E5%9C%A8%E7%BA%BF%E7%A8%8B%E7%BB%84%E5%86%85%E6%89%BE%E5%AF%BB%E6%89%BE%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%EF%BC%8C%E5%B0%B1%E6%89%BEinit%E8%BF%9B%E7%A8%8B%EF%BC%8Cinit%E4%BC%9A%E8%B0%83%E7%94%A8wait4%E6%9D%A5%E6%B8%85%E9%99%A4%E8%BF%99%E4%BA%9B%E5%83%B5%E6%AD%BB%E8%BF%9B%E7%A8%8B%0A%0A%0A%0A%0A%0A%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%0A\-\-\-\-\-\-\-\-\-\-\-%0ALINUX%3A%E6%8A%A2%E5%8D%A0%E5%BC%8F%E5%A4%9A%E4%BB%BB%E5%8A%A1%E6%A8%A1%E5%BC%8F%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E7%94%B1%E9%AB%98%E5%BA%A6%E7%A8%8B%E5%BA%8F%E6%9D%A5%E5%86%B3%E5%AE%9A%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%81%9C%E6%AD%A2%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%BF%90%E8%A1%8C%E3%80%82%E8%BF%99%E4%B8%AA%E5%BC%BA%E5%88%B6%E7%9A%84%E6%8C%82%E8%B5%B7%E5%8A%A8%E4%BD%9C%E5%B0%B1%E5%8F%AB%20%E6%8A%A2%E5%8D%A0%E3%80%82%E8%BF%9B%E7%A8%8B%E5%9C%A8%E8%A2%AB%E6%8A%A2%E5%8D%A0%E4%B9%8B%E5%89%8D%E8%83%BD%E5%A4%9F%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4%E6%98%AF%E9%A2%84%E5%85%88%E8%AE%BE%E7%BD%AE%E5%A5%BD%E7%9A%84%EF%BC%8C%E5%8F%AB%EF%BC%9A%E8%BF%9B%E7%A8%8B%E6%97%B6%E9%97%B4%E7%89%87%E3%80%82%0A%0A%E8%BF%9B%E7%A8%8B%E5%88%86%E4%B8%BA%EF%BC%9AIO%E6%B6%88%E8%80%97%E4%B8%8E%E5%A4%84%E7%90%86%E5%99%A8%E6%B6%88%E8%80%97%E3%80%82IO%E6%9C%89%E9%98%BB%E5%A1%9E%EF%BC%8C%E8%80%8C%E4%B8%94%E8%BF%98%E6%9C%89%E7%A3%81%E7%9B%98%E7%AD%89%E7%AD%89%EF%BC%8C%E9%9D%9E%E5%B8%B8%E6%85%A2%E3%80%82%E8%80%8C%E5%A4%84%E7%90%86%E5%99%A8%E6%B6%88%E8%80%97%E6%9B%B4%E6%88%91%E7%9A%84%E6%98%AF%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%B0%BD%E9%87%8F%E5%B0%91%E8%AE%A9%E8%BF%99%E7%B1%BB%E5%9E%8B%E6%89%A7%E8%A1%8C%E3%80%82%0A%0A%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%9C%A8IO%E7%AD%89%E5%BE%85%E4%B8%8A%E8%80%97%E8%B4%B9%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%9A%E4%BA%8E%E5%85%B6%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4%EF%BC%8C%E9%82%A3%E4%B9%88%E6%98%8E%E6%98%BE%E5%B1%9E%E4%BA%8EIO%E6%B6%88%E8%80%97%E5%9E%8B%EF%BC%8C%E5%AE%83%E7%9A%84%E4%BC%98%E5%8C%96%E7%BA%A7%E8%A2%AB%E5%8A%A8%E6%80%81%E6%8F%90%E9%AB%98%E3%80%82%E5%8F%8D%E4%B9%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%85%A8%E9%83%A8%E6%97%B6%E9%97%B4%E7%89%87%E4%B8%80%E4%B8%8B%E5%B0%B1%E8%A2%AB%E8%80%97%E5%B0%BD%EF%BC%8C%E5%B0%B1%E5%B1%9E%E4%BA%8E%20%E5%A4%84%E7%90%86%E5%99%A8%E6%B6%88%E8%80%97%E5%9E%8B%EF%BC%8C%E5%AE%83%E7%9A%84%E4%BC%98%E7%82%B9%E7%BA%A7%E4%BC%9A%E9%99%8D%E4%BD%8E%E3%80%82%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%AB%E9%AB%98%E7%9A%84%E8%BF%9B%E7%A8%8B%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%E4%B9%9F%E8%BE%83%E9%95%BF%E3%80%82%0A%0APS%E6%9F%A5%E7%9C%8BNICE%E5%80%BC%EF%BC%8C%E8%8C%83%E5%9B%B4%E4%BB%8E\-20%E5%88%B0%2B19%E9%BB%98%E8%AE%A4%E4%B8%BA0%EF%BC%8C%E5%80%BC%E8%B6%8A%E5%A4%A7%E4%BC%98%E5%85%88%E8%B6%8A%E4%BD%8E%EF%BC%8C%E6%A0%B9%E6%8D%AENICE%E5%80%BC%E5%88%86%E9%85%8D%E6%97%B6%E9%97%B4%E7%89%87%EF%BC%88task\_struct%E4%B8%ADstatic\_prio%EF%BC%89%0A%0A%E6%97%B6%E9%97%B4%E7%89%87%EF%BC%9A2ms%20\-%20100ms\(%E9%BB%98%E8%AE%A4\)%20\-%20800ms%EF%BC%8C%E4%BC%9A%E6%9C%89\-%EF%BC%95%E5%88%B0%2B%EF%BC%95%E7%9A%84%E5%A5%96%E5%8A%B1%E6%88%96%E7%BD%9A%E5%88%86%0A%0A%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%EF%BC%9A%E7%AE%80%E5%8D%95%E9%93%BE%E8%A1%A8%0A%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97%EF%BC%88%E5%8F%AF%E6%89%A7%E8%A1%8C%E8%BF%9B%E7%A8%8B%EF%BC%89%EF%BC%8C%E6%AF%8F%E4%B8%AACPU%E9%83%BD%E6%9C%89%E4%B8%80%E4%B8%AA%EF%BC%8C%E5%85%B6%E5%85%83%E7%B4%A0%E4%B8%BA%3Arunqueue%EF%BC%88%E7%AE%80%E7%A7%B0%EF%BC%9Arq%EF%BC%89%E7%BB%93%E6%9E%84%E4%BD%93%0A%0A%E6%AF%8F%E4%B8%AACPU%E7%9A%84RQ%E9%98%9F%E5%88%97%E9%93%BE%E8%A1%A8%E4%B8%AD%E8%BF%98%E5%8C%85%E5%90%AB%E4%BF%A9%E4%B8%AA%E4%BC%98%E5%85%88%E7%BA%A7%E6%95%B0%E7%BB%84%EF%BC%9A%E4%B8%80%E4%B8%AA%E6%98%AF%E6%B4%BB%E8%B7%83%E7%9A%84%EF%BC%8C%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%BF%87%E6%9C%9F%E7%9A%84%EF%BC%8C%E5%AE%83%E6%98%AFprio\_array%E7%BB%93%E6%9E%84%E4%BD%93%E3%80%82%E8%BF%99%E6%A0%B7%E7%9A%84%E8%AF%9D%EF%BC%8C%E6%89%80%E6%9C%89%E8%BF%90%E8%A1%8C%E9%98%9F%E5%88%97%E5%B0%B1%E9%83%BD%E6%9C%89%E4%BA%86%20%E4%BC%98%E5%85%88%E7%BA%A7%E7%9A%84%E6%A6%82%E5%BF%B5%E4%BA%86%EF%BC%8C%E8%BF%9B%E7%A8%8B%E5%9C%A8%E7%94%A8%E5%B0%BD%E6%97%B6%E9%97%B4%E7%89%87%E5%90%8E%EF%BC%8C%E4%BC%9A%E8%A2%AB%E9%87%8D%E6%96%B0%E8%AE%A1%E7%AE%97%E6%97%B6%E9%97%B4%E7%89%87%EF%BC%8C%E7%84%B6%E5%90%8E%E7%A7%BB%E5%88%B0%E8%BF%87%E6%9C%9F%E6%95%B0%E7%BB%84%EF%BC%8C%E5%BD%93%E6%B4%BB%E5%8A%A8%E6%95%B0%E7%BB%84%E4%B8%AD%E6%B2%A1%E6%9C%89%E5%89%A9%E4%BD%99%E8%BF%9B%E7%A8%8B%E6%97%B6%EF%BC%8C%E8%BF%99%E4%BF%A9%E4%B8%AA%E6%95%B0%E7%BB%84%E8%A2%AB%E4%BA%A4%E6%8D%A2%E3%80%82%0A%0A%E5%BD%93%E6%89%80%E6%9C%89%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%20%E9%83%BD%E7%94%A8%E5%AE%8C%E6%97%B6%EF%BC%8C%E5%B8%B8%E8%A7%84%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%E7%AE%97%E6%B3%95%20%EF%BC%9A%0Afor%20\(%E7%B3%BB%E7%BB%9F%E4%B8%AD%E7%9A%84%E6%AF%8F%E4%B8%AA%E4%BB%BB%E5%8A%A1\)%7B%0A%09%E9%87%8D%E6%96%B0%E8%AE%A1%E7%AE%97%E4%BC%98%E5%85%88%E7%BA%A7%0A%09%E9%87%8D%E6%96%B0%E8%AE%A1%E7%AE%97%E6%97%B6%E9%97%B4%E7%89%87%0A%7D%0A%0A%0A%E7%BC%BA%E7%82%B9%E5%B0%B1%E4%B8%8D%E8%AF%B4%E4%BA%86%EF%BC%8C%E8%A6%81%E5%BE%AA%E7%8E%AF%E6%95%B4%E4%B8%AA%E5%88%97%E9%98%9F~%E5%A4%8D%E6%9D%82%E5%BA%A6%EF%BC%9AO\(N\)%0A%0A%E6%97%B6%E9%97%B4%E7%89%87%E8%AE%A1%E7%AE%97%EF%BC%9A%0A%0A%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E5%A6%82%E6%9E%9C%E7%BB%8F%E5%B8%B8%E7%9D%A1%E7%9C%A0%EF%BC%8C%E9%82%A3%E5%B0%B1%E6%98%AFIO%E6%B6%88%E8%80%97%E5%9E%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%E6%AF%94%E7%9D%A1%E7%9C%A0%E6%97%B6%E9%97%B4%E8%A6%81%E9%95%BF%EF%BC%8C%E5%AE%83%E5%B0%B1%E5%B1%9E%E4%BA%8E%E5%A4%84%E7%90%86%E5%99%A8%E6%B6%88%E8%80%97%E5%9E%8B%0Atask\_struct%E4%B8%ADcleep\_avg%EF%BC%8C%E5%BD%93%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8B%E4%BB%8E%E7%8A%B6%E6%80%81%E6%81%A2%E5%A4%8D%E5%88%B0%E6%89%A7%E8%A1%8C%E7%8A%B6%E6%80%81%E6%97%B6%EF%BC%8Csleep%E5%A2%9E%E9%95%BF%EF%BC%8C%E7%9B%B8%E5%8F%8D%EF%BC%8C%E8%BF%9B%E7%A8%8B%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%AA%E6%97%B6%E9%97%B4%E8%8A%82%E6%8B%8D%EF%BC%8Csleep\_ave%E9%80%92%E5%87%8F%E3%80%82%E9%99%A4%E4%BA%86%E7%9D%A1%E7%9C%A0%E9%95%BF%E7%9F%AD%EF%BC%8C%E8%BF%98%E8%A6%81%E8%AE%A1%E7%AE%97%E6%89%A7%E8%A1%8C%E6%97%B6%E9%97%B4%0A%0A%E5%BD%93%E4%BC%91%E7%9C%A0%E5%90%8E\(sleep\)%EF%BC%9A%E6%8A%8A%E8%87%AA%E5%B7%B1%E4%BB%8E%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97%E7%A7%BB%E5%87%BA%EF%BC%8C%E6%94%BE%E5%85%A5%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%EF%BC%8C%E8%B0%83%E7%94%A8schedule\(\)%0A%0A%E6%96%B0%E5%BB%BA%E8%BF%9B%E7%A8%8B%E5%90%8E%EF%BC%8C%E5%AD%90%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%88%B6%E8%BF%9B%E7%A8%8B%E5%9D%87%E5%88%86%E6%97%B6%E9%97%B4%E7%89%87%20%0A%0A%0A%0A%0A%E5%BD%93%E4%B8%80%E4%B8%AA%E8%BF%9B%E7%A8%8BIO%EF%BC%8CREAD%E6%96%87%E4%BB%B6%E6%97%B6%E5%80%99%EF%BC%8C%E7%B3%BB%E7%BB%9F%E5%B0%B1%E4%BC%9A%E6%8A%8A%E6%AD%A4%E8%BF%9B%E7%A8%8B%E7%9D%A1%E7%9C%A0%EF%BC%8C%E6%8A%8A%E8%87%AA%E5%B7%B1%E4%BB%8E%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97%E7%A7%BB%E5%87%BA%EF%BC%8C%E6%94%BE%E5%85%A5%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%0A%0A%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%EF%BC%9A%0Adeclare\_waitqueue%3A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AD%89%E5%BE%85%E9%A1%B9%0Aadd\_wait\_queue%3A%E6%8A%8A%E8%87%AA%E5%B7%B1%E5%8A%A0%E5%85%A5%E5%88%B0%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%E4%B8%AD%0Aflag%EF%BC%9Atask\_interruptible%E6%88%96%E8%80%85task\_uninterruptible%0A%E6%A3%80%E6%9F%A5%E6%9D%A1%E4%BB%B6%E6%98%AF%E5%90%A6%E4%B8%BA%E7%9C%9F%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%9C%9F%EF%BC%88%E6%AF%94%E5%A6%82%EF%BC%9AIO%E7%BB%93%E6%9D%9F%E4%BA%86%EF%BC%89%EF%BC%8C%E5%B0%B1%E4%B8%8D%E7%94%A8%E4%BC%91%E7%9C%A0%E4%BA%86%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E4%B8%BA%E7%9C%9F%EF%BC%8C%E8%B0%83%E7%94%A8schedule%0A%E5%BD%93%E8%BF%9B%E7%A8%8B%E8%A2%AB%E5%94%A4%E9%86%92%E6%97%B6%EF%BC%8C%E5%86%8D%E6%AC%A1%E6%A3%80%E6%9F%A5%E6%9D%A1%E4%BB%B6%E6%98%AF%E5%90%A6%E4%B8%BA%E7%9C%9F%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%EF%BC%8C%E9%80%80%E5%87%BA%E5%BE%AA%E7%8E%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%98%AF%E5%86%8D%E8%B0%83%E7%94%A8schedule%0A%E6%9D%A1%E4%BB%B6%E6%BB%A1%E8%B6%B3%EF%BC%8Cremove\_wait\_queue%EF%BC%8C%E7%A7%BB%E5%87%BA%E7%AD%89%E5%BE%85%E9%98%9F%E5%88%97%0A%0A%0ALinux%E8%B0%83%E5%BA%A6%E6%97%B6%E6%9C%BA%E4%B8%BB%E8%A6%81%E6%9C%89%EF%BC%9A%0A\-\-\-\-\-\-\-\-%0A%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E7%9A%84%E6%97%B6%E5%88%BB%EF%BC%9A%E8%BF%9B%E7%A8%8B%E7%BB%88%E6%AD%A2%E3%80%81%E8%BF%9B%E7%A8%8B%E7%9D%A1%E7%9C%A0%EF%BC%9B%0A%E5%BD%93%E5%89%8D%E8%BF%9B%E7%A8%8B%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%E7%94%A8%E5%AE%8C%E6%97%B6%EF%BC%88current\-%3Ecounter%3D0%EF%BC%89%EF%BC%9B%0A%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F%E4%B8%BB%E5%8A%A8%E8%B0%83%E7%94%A8schedule%EF%BC%9B%0A%E8%BF%9B%E7%A8%8B%E4%BB%8E%E4%B8%AD%E6%96%AD%E3%80%81%E5%BC%82%E5%B8%B8%E5%8F%8A%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E8%BF%94%E5%9B%9E%E5%88%B0%E7%94%A8%E6%88%B7%E6%80%81%E6%97%B6%EF%BC%9B%0A%0A%0A%0A%E5%AF%B9%E7%A7%B0%E5%A4%84%E7%90%86%E5%99%A8%EF%BC%9A%E7%8E%B0%E5%9C%A8%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%BD%E6%98%AF%E5%A4%9A%E6%A0%B8%EF%BC%8C%E6%AF%8F%E4%B8%AACPU%E9%83%BD%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E8%BF%9B%E7%A8%8B%E9%93%BE%E8%A1%A8%EF%BC%8C%E5%A6%82%E6%9E%9CA%E7%9A%84CPU%E5%BE%88%E5%BF%99B%E7%9A%84%E8%BF%9B%E7%A8%8B%E9%93%BE%E8%A1%A8%E5%8D%B4%E6%98%AF%E7%A9%BA%E7%9A%84%EF%BC%8C%E5%B0%B1%E6%98%AF%E9%9C%80%E8%A6%81%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1load\_balance\(\)%EF%BC%8C%E5%8F%AA%E8%A6%81%E5%BD%93%E5%89%8D%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%AE%83%E5%B0%B1%E8%A2%AB%E8%B0%83%E7%94%A8%E3%80%82%E6%AD%A4%E5%A4%96%E8%A2%AB%E5%AE%9A%E6%97%B6%E5%99%A8%E8%B0%83%E7%94%A8%20%E3%80%82%E5%9C%A8%E5%8D%95%E6%A0%B8%E5%A4%84%E7%90%86%E4%B8%AD%EF%BC%8Cload\_balance%E4%B8%8D%E4%BC%9A%E8%A2%AB%E7%BC%96%E8%AF%91%E8%BF%9B%E5%86%85%E6%A0%B8%E3%80%82%0A%0Aload\_balance%2C%E9%9C%80%E8%A6%81%E5%85%88%E9%94%81%E4%BD%8F%E5%BD%93%E5%89%8D%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97%0A%0Aloadbalace%3A%0Afind\_busiest\_queue%2C%E6%89%BE%E5%88%B0%E6%9C%80%E7%B9%81%E5%BF%99%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E9%98%9F%E5%88%97\(%E8%BF%9B%E7%A8%8B%E6%95%B0%E7%9B%AE%E6%9C%80%E5%A4%9A\)%EF%BC%8C%E4%BB%8E%E6%AD%A4%E9%98%9F%E5%88%97%E4%B8%AD%E9%80%89%E6%8B%A9%E4%B8%80%E4%B8%AA%E4%BC%98%E5%85%88%E7%BA%A7%E6%95%B0%E7%BB%84%EF%BC%8C%E6%9C%80%E5%A5%BD%E6%98%AF%E8%BF%87%E6%9C%9F%E6%95%B0%E7%BB%84%EF%BC%8C%E5%9B%A0%E4%B8%BA%E9%82%A3%E9%87%8C%E7%9A%84%E8%BF%9B%E7%A8%8B%E6%9C%89%E8%BE%83%E9%95%BF%E6%97%B6%E9%97%B4%E6%B2%A1%E6%9C%89%E8%BF%90%E8%A1%8C%E4%BA%86%E3%80%82%E5%A6%82%E6%9E%9C%E4%B8%BA%E7%A9%BA%EF%BC%8C%E5%88%99%E5%8F%96%E6%B4%BB%E5%8A%A8%E6%95%B0%E7%BB%84%EF%BC%8C%E7%84%B6%E5%90%8Eload\_balace%E5%AF%BB%E6%89%BE%E5%90%AB%E8%BF%9B%E7%A8%8B%E6%95%B0%E9%87%8F%E6%9C%80%E5%B0%91%E4%B8%94%E4%BC%98%E5%85%88%E7%BA%A7%E6%9C%80%E9%AB%98%E7%9A%84%0A%0Aschedule%20%E4%BC%9A%E8%B0%83%E7%94%A8context\_switch%0Aswitch\_mm%3A%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7%E5%86%85%E5%AD%98%E7%A9%BA%E9%97%B4%0Aswitch\_to%3A%E5%88%87%E6%8D%A2CPU%0A%0A%E5%86%85%E6%A0%B8%E9%9C%80%E8%A6%81%E7%9F%A5%E9%81%93%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E8%B0%83%E7%94%A8schedule%2C%E4%BB%85%E9%9D%A0%E7%94%A8%E6%88%B7%E7%A8%8B%E5%BA%8F%EF%BC%8C%E5%AE%83%E4%BB%AC%E5%8F%AF%E8%83%BD%E6%B0%B8%E8%BF%9C%E6%89%A7%E8%A1%8C%E4%B8%8B%E5%8E%BB%E3%80%82%E7%9B%B8%E5%8F%8D%EF%BC%8C%E5%86%85%E6%A0%B8%E6%8F%90%E4%BE%9B%E4%BA%86need\_reshed%E8%A1%A8%E6%98%8E%EF%BC%9A%E9%9C%80%E8%A6%81%E9%87%8D%E6%96%B0%E6%89%A7%E8%A1%8C%E4%B8%80%E6%AC%A1%E8%B0%83%E5%BA%A6%E3%80%82%E6%9F%90%E8%BF%9B%E7%A8%8B%E8%80%97%E5%B0%BD%E5%AE%83%E7%9A%84%E6%97%B6%E9%97%B4%E7%89%87%20%E6%97%B6%EF%BC%8Cscheduler\_tick%E5%B0%B1%E4%BC%9A%E8%A2%AB%E6%A0%87%E5%BF%97%0A%0A%0A%E4%BF%A9%E7%A7%8D%E6%97%B6%E5%AE%9E%E7%9A%84%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%EF%BC%9Asched\_fifo%E3%80%81sched\_rr%EF%BC%8C%E9%9D%9E%E5%AE%9E%E6%97%B6%E7%9A%84%E9%AB%98%E5%BA%A6%E7%AD%96%E7%95%A5%E6%98%AFsched\_normal%EF%BC%8C%E5%AE%9E%E6%97%B6%E8%B0%83%E8%AF%95%EF%BC%8C%E6%B2%A1%E6%9C%89%E4%BC%98%E5%85%88%E6%9D%83%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%E6%98%AF%E9%9D%99%E6%80%81%E4%BC%98%E5%85%88%E9%9B%86%EF%BC%8C%E4%BC%98%E5%85%88%E7%BA%A7%E5%88%AB%E6%9C%80%E9%AB%98%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%23include%20%3Cstdio.h%3E%0A%23include%20%3Csys%2Ftypes.h%3E%20%2F\*%20%E6%8F%90%E4%BE%9B%E7%B1%BB%E5%9E%8Bpid\_t%E7%9A%84%E5%AE%9A%E4%B9%89%20\*%2F%0A%23include%20%3Cunistd.h%3E%20%2F\*%20%E6%8F%90%E4%BE%9B%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89%20\*%2F%0Aint%20main\(\)%7B%0A%20%20%20%20pid\_t%20pid1%3B%0A%20%20%20%20printf\(%22in%20main%20function...%5Cn%22\)%3B%0A%20%20%20%20pid1%20%3D%20fork\(\)%3B%0A%20%20%20%20printf\(%22pid%3A%25d%5Cn%22%2Cpid1\)%3B%20%20%0A%7D%0A%0A%0Athread\_create%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%EF%BC%8C%E6%88%90%E5%8A%9F%E8%BF%94%E5%9B%9E0%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9EExxx%EF%BC%88%E4%B8%BA%E6%AD%A3%E6%95%B0%EF%BC%89%E3%80%82%0A%0A%20%20%20%20\*%20pthread\_t%20\*tid%EF%BC%9A%E7%BA%BF%E7%A8%8Bid%E7%9A%84%E7%B1%BB%E5%9E%8B%E4%B8%BApthread\_t%EF%BC%8C%E9%80%9A%E5%B8%B8%E4%B8%BA%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B4%E5%9E%8B%EF%BC%8C%E5%BD%93%E8%B0%83%E7%94%A8pthread\_create%E6%88%90%E5%8A%9F%E6%97%B6%EF%BC%8C%E9%80%9A%E8%BF%87\*tid%E6%8C%87%E9%92%88%E8%BF%94%E5%9B%9E%E3%80%82%0A%20%20%20%20\*%20const%20pthread\_attr\_t%20\*attr%EF%BC%9A%E6%8C%87%E5%AE%9A%E5%88%9B%E5%BB%BA%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%B1%9E%E6%80%A7%EF%BC%8C%E5%A6%82%E7%BA%BF%E7%A8%8B%E4%BC%98%E5%85%88%E7%BA%A7%E3%80%81%E5%88%9D%E5%A7%8B%E6%A0%88%E5%A4%A7%E5%B0%8F%E3%80%81%E6%98%AF%E5%90%A6%E4%B8%BA%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B%E7%AD%89%E3%80%82%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8NULL%E6%9D%A5%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC%EF%BC%8C%E9%80%9A%E5%B8%B8%E6%83%85%E5%86%B5%E4%B8%8B%E6%88%91%E4%BB%AC%E9%83%BD%E6%98%AF%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E5%80%BC%E3%80%82%0A%20%20%20%20\*%20void%20\*\(\*func\)%20\(void%20\*\)%EF%BC%9A%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88func%EF%BC%8C%E6%8C%87%E5%AE%9A%E5%BD%93%E6%96%B0%E7%9A%84%E7%BA%BF%E7%A8%8B%E5%88%9B%E5%BB%BA%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%B0%86%E6%89%A7%E8%A1%8C%E7%9A%84%E5%87%BD%E6%95%B0%E3%80%82%0A%20%20%20%20\*%20void%20\*arg%EF%BC%9A%E7%BA%BF%E7%A8%8B%E5%B0%86%E6%89%A7%E8%A1%8C%E7%9A%84%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E3%80%82%E5%A6%82%E6%9E%9C%E6%83%B3%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C%E8%AF%B7%E5%B0%86%E5%AE%83%E4%BB%AC%E5%B0%81%E8%A3%85%E5%9C%A8%E4%B8%80%E4%B8%AA%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%AD%E3%80%82%0A%0Apthread\_join%E7%94%A8%E4%BA%8E%E7%AD%89%E5%BE%85%E6%9F%90%E4%B8%AA%E7%BA%BF%E7%A8%8B%E9%80%80%E5%87%BA%EF%BC%8C%E6%88%90%E5%8A%9F%E8%BF%94%E5%9B%9E0%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9EExxx%EF%BC%88%E4%B8%BA%E6%AD%A3%E6%95%B0%EF%BC%89%E3%80%82%0A%0A%20%20%20%20\*%20pthread\_t%20tid%EF%BC%9A%E6%8C%87%E5%AE%9A%E8%A6%81%E7%AD%89%E5%BE%85%E7%9A%84%E7%BA%BF%E7%A8%8BID%0A%20%20%20%20\*%20void%20\*\*%20status%EF%BC%9A%E5%A6%82%E6%9E%9C%E4%B8%8D%E4%B8%BANULL%EF%BC%8C%E9%82%A3%E4%B9%88%E7%BA%BF%E7%A8%8B%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E5%AD%98%E5%82%A8%E5%9C%A8status%E6%8C%87%E5%90%91%E7%9A%84%E7%A9%BA%E9%97%B4%E4%B8%AD%EF%BC%88%E8%BF%99%E5%B0%B1%E6%98%AF%E4%B8%BA%E4%BB%80%E4%B9%88status%E6%98%AF%E4%BA%8C%E7%BA%A7%E6%8C%87%E9%92%88%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%81%E8%BF%99%E7%A7%8D%E6%89%8D%E5%8F%82%E6%95%B0%E4%B9%9F%E7%A7%B0%E4%B8%BA%E2%80%9C%E5%80%BC\-%E7%BB%93%E6%9E%9C%E2%80%9D%E5%8F%82%E6%95%B0%EF%BC%89%E3%80%82%0A%0Apthread\_self%E7%94%A8%E4%BA%8E%E8%BF%94%E5%9B%9E%E5%BD%93%E5%89%8D%E7%BA%BF%E7%A8%8B%E7%9A%84ID%E3%80%82%0A%0Apthread\_detach%E7%94%A8%E4%BA%8E%E6%98%AF%E6%8C%87%E5%AE%9A%E7%BA%BF%E7%A8%8B%E5%8F%98%E4%B8%BA%E5%88%86%E7%A6%BB%E7%8A%B6%E6%80%81%EF%BC%8C%E5%B0%B1%E5%83%8F%E8%BF%9B%E7%A8%8B%E8%84%B1%E7%A6%BB%E7%BB%88%E7%AB%AF%E8%80%8C%E5%8F%98%E4%B8%BA%E5%90%8E%E5%8F%B0%E8%BF%9B%E7%A8%8B%E7%B1%BB%E4%BC%BC%E3%80%82%E6%88%90%E5%8A%9F%E8%BF%94%E5%9B%9E0%EF%BC%8C%E5%90%A6%E5%88%99%E8%BF%94%E5%9B%9EExxx%EF%BC%88%E4%B8%BA%E6%AD%A3%E6%95%B0%EF%BC%89%E3%80%82%E5%8F%98%E4%B8%BA%E5%88%86%E7%A6%BB%E7%8A%B6%E6%80%81%E7%9A%84%E7%BA%BF%E7%A8%8B%EF%BC%8C%E5%A6%82%E6%9E%9C%E7%BA%BF%E7%A8%8B%E9%80%80%E5%87%BA%EF%BC%8C%E5%AE%83%E7%9A%84%E6%89%80%E6%9C%89%E8%B5%84%E6%BA%90%E5%B0%86%E5%85%A8%E9%83%A8%E9%87%8A%E6%94%BE%E3%80%82%E8%80%8C%E5%A6%82%E6%9E%9C%E4%B8%8D%E6%98%AF%E5%88%86%E7%A6%BB%E7%8A%B6%E6%80%81%EF%BC%8C%E7%BA%BF%E7%A8%8B%E5%BF%85%E9%A1%BB%E4%BF%9D%E7%95%99%E5%AE%83%E7%9A%84%E7%BA%BF%E7%A8%8BID%EF%BC%8C%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%9B%B4%E5%88%B0%E5%85%B6%E5%AE%83%E7%BA%BF%E7%A8%8B%E5%AF%B9%E5%AE%83%E8%B0%83%E7%94%A8%E4%BA%86pthread\_join%E3%80%82%0A%0Apthread\_exit%E7%94%A8%E4%BA%8E%E7%BB%88%E6%AD%A2%E7%BA%BF%E7%A8%8B%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E4%BB%A5%E4%BE%BF%E5%85%B6%E4%BB%96%E7%BA%BF%E7%A8%8B%E9%80%9A%E8%BF%87pthread\_join%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96%E8%AF%A5%E7%BA%BF%E7%A8%8B%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E3%80%82%0A%0A%20%20%20%20\*%20void%20\*status%EF%BC%9A%E6%8C%87%E9%92%88%E7%BA%BF%E7%A8%8B%E7%BB%88%E6%AD%A2%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC%E3%80%82%0A%0A%0Aint%20pthread\_mutex\_lock\(pthread\_mutex\_t%20\*%20mptr\)%3B%0Aint%20pthread\_mutex\_unlock\(pthread\_mutex\_t%20\*%20mptr\)%3B%0A%0A%E5%9C%A8%E5%AF%B9%E4%B8%B4%E7%95%8C%E8%B5%84%E6%BA%90%EF%BC%88%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%EF%BC%89%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E4%B9%8B%E5%89%8D%E9%9C%80%E8%A6%81pthread\_mutex\_lock%E5%85%88%E5%8A%A0%E9%94%81%EF%BC%8C%E6%93%8D%E4%BD%9C%E5%AE%8C%E5%90%8Epthread\_mutex\_unlock%E5%86%8D%E8%A7%A3%E9%94%81%E3%80%82%0A%E8%80%8C%E4%B8%94%E5%9C%A8%E8%BF%99%E4%B9%8B%E5%89%8D%E9%9C%80%E8%A6%81%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AApthread\_mutex\_t%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E7%94%A8%E4%BD%9C%E5%89%8D%E9%9D%A2%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%0A%0A%E4%BD%BF%E7%94%A8%E4%BA%92%E6%96%A5%E9%94%81%EF%BC%88%E4%BA%92%E6%96%A5%EF%BC%89%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%BA%BF%E7%A8%8B%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%E3%80%82%E7%A1%AE%E4%BF%9D%E4%B8%80%E6%AC%A1%E5%8F%AA%E6%9C%89%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E4%B8%B4%E7%95%8C%E6%AE%B5%E6%9D%A5%E5%90%8C%E6%AD%A5%E5%A4%9A%E4%B8%AA%E7%BA%BF%E7%A8%8B%0A%0A%E7%BA%BF%E7%A8%8B%E4%B9%8B%E9%97%B4%E7%9A%84%E5%90%8C%E6%AD%A5%3A%E5%BF%85%E9%A1%BB%E4%B8%8E%E4%BA%92%E6%96%A5%E7%90%90%E9%85%8D%E5%90%88%E4%BD%BF%E7%94%A8%0A%0Aint%20pthread\_cond\_wait\(pthread\_cond\_t%20\*cptr%2C%20pthread\_mutex\_t%20\*mptr\)%3B%20%0Aint%20pthread\_cond\_signal\(pthread\_cond\_t%20\*cptr\)%3B%20%0A%2F%2FBoth%20return%3A%200%20if%20OK%2C%20positive%20Exxx%20value%20on%20error%0A%0Apthread\_cond\_wait%EF%BC%9A%E7%94%A8%E4%BA%8E%E7%AD%89%E5%BE%85%E6%9F%90%E4%B8%AA%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9D%A1%E4%BB%B6%E4%B8%BA%E7%9C%9F%0Apthread\_cond\_signal%E7%94%A8%E4%BA%8E%E9%80%9A%E7%9F%A5%E9%98%BB%E5%A1%9E%E7%9A%84%E7%BA%BF%E7%A8%8B%E6%9F%90%E4%B8%AA%E7%89%B9%E5%AE%9A%E7%9A%84%E6%9D%A1%E4%BB%B6%E4%B8%BA%E7%9C%9F%E4%BA%86%0A%0A%E5%9C%A8%E8%B0%83%E7%94%A8%E8%80%85%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E4%B9%8B%E5%89%8D%E9%9C%80%E8%A6%81%E5%A3%B0%E6%98%8E%E4%B8%80%E4%B8%AApthread\_cond\_t%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8F%EF%BC%8C%E7%94%A8%E4%BA%8E%E8%BF%99%E4%B8%A4%E4%B8%AA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E3%80%82%0A%20%0A%0A%0A%0A%E7%BC%96%E8%AF%91%E5%8F%82%E6%95%B0%EF%BC%9Agcc%20\-lpthread%0A%0A%23include%3Cstdio.h%3E%0A%23include%3Cstdlib.h%3E%0A%23include%3Cpthread.h%3E%0A%23include%3Cerrno.h%3E%0A%23include%3Cunistd.h%3E%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A%0A
